<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>fxopt: fxopt_stmts.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">fxopt
   </div>
   <div id="projectbrief">A floating-point to fixed-point arithmetic conversion plugin for gcc</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('fxopt__stmts_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">fxopt_stmts.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions and macros for processing GIMPLE assignment statements.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="fxopt__plugin_8h_source.html">fxopt_plugin.h</a>&quot;</code><br/>
</div>
<p><a href="fxopt__stmts_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa6401978bf1be47af8de2998b9a2ded3"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="struct_s_i_f.html">SIF</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fxopt__stmts_8c.html#aa6401978bf1be47af8de2998b9a2ded3">nop</a> (gimple_stmt_iterator *gsi_p, struct <a class="el" href="struct_s_i_f.html">SIF</a> oprnd_frmt[], tree oprnd_tree[])</td></tr>
<tr class="memdesc:aa6401978bf1be47af8de2998b9a2ded3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process unary assignment statements.  <a href="#aa6401978bf1be47af8de2998b9a2ded3">More...</a><br/></td></tr>
<tr class="separator:aa6401978bf1be47af8de2998b9a2ded3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c7b897df9c5878b8eff6928f47b9987"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="struct_s_i_f.html">SIF</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fxopt__stmts_8c.html#a8c7b897df9c5878b8eff6928f47b9987">array_ref</a> (gimple_stmt_iterator *gsi_p, struct <a class="el" href="struct_s_i_f.html">SIF</a> oprnd_frmt[], tree oprnd_tree[])</td></tr>
<tr class="memdesc:a8c7b897df9c5878b8eff6928f47b9987"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process ARRAY_REF (array reference) statements.  <a href="#a8c7b897df9c5878b8eff6928f47b9987">More...</a><br/></td></tr>
<tr class="separator:a8c7b897df9c5878b8eff6928f47b9987"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e908e635a621bf4d23147aa5e14deb5"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="struct_s_i_f.html">SIF</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fxopt__stmts_8c.html#a0e908e635a621bf4d23147aa5e14deb5">pointer_math</a> (gimple_stmt_iterator *gsi_p, struct <a class="el" href="struct_s_i_f.html">SIF</a> oprnd_frmt[], tree oprnd_tree[])</td></tr>
<tr class="memdesc:a0e908e635a621bf4d23147aa5e14deb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process statements that include pointer arithmetic.  <a href="#a0e908e635a621bf4d23147aa5e14deb5">More...</a><br/></td></tr>
<tr class="separator:a0e908e635a621bf4d23147aa5e14deb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59f4847538e5f36361c3695ce3166d8d"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="struct_s_i_f.html">SIF</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fxopt__stmts_8c.html#a59f4847538e5f36361c3695ce3166d8d">addition</a> (gimple_stmt_iterator *gsi_p, struct <a class="el" href="struct_s_i_f.html">SIF</a> oprnd_frmt[], tree oprnd_tree[])</td></tr>
<tr class="memdesc:a59f4847538e5f36361c3695ce3166d8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process addition and subtraction statements.  <a href="#a59f4847538e5f36361c3695ce3166d8d">More...</a><br/></td></tr>
<tr class="separator:a59f4847538e5f36361c3695ce3166d8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abee316a4cfbde39a6337009ee53eda6a"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="struct_s_i_f.html">SIF</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fxopt__stmts_8c.html#abee316a4cfbde39a6337009ee53eda6a">multiplication</a> (gimple_stmt_iterator *gsi_p, struct <a class="el" href="struct_s_i_f.html">SIF</a> oprnd_frmt[], tree oprnd_tree[])</td></tr>
<tr class="memdesc:abee316a4cfbde39a6337009ee53eda6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process multiplication statements.  <a href="#abee316a4cfbde39a6337009ee53eda6a">More...</a><br/></td></tr>
<tr class="separator:abee316a4cfbde39a6337009ee53eda6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36e1ee30cfaf69fcd060d9cb6f111ebd"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="struct_s_i_f.html">SIF</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fxopt__stmts_8c.html#a36e1ee30cfaf69fcd060d9cb6f111ebd">division</a> (gimple_stmt_iterator *gsi_p, struct <a class="el" href="struct_s_i_f.html">SIF</a> oprnd_frmt[], tree oprnd_tree[])</td></tr>
<tr class="memdesc:a36e1ee30cfaf69fcd060d9cb6f111ebd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Integer division.  <a href="#a36e1ee30cfaf69fcd060d9cb6f111ebd">More...</a><br/></td></tr>
<tr class="separator:a36e1ee30cfaf69fcd060d9cb6f111ebd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Functions and macros for processing GIMPLE assignment statements. </p>
<dl class="section author"><dt>Author</dt><dd>K. Joseph Hass </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Created: 2014-01-05T10:20:35-0500 </dd>
<dd>
Last modified: 2014-01-08T12:19:47-0500</dd></dl>
<p>These functions process the operands for the various GIMPLE assignment statements, determining whether any shifts are needed for the operands as well as the format of the result operand.</p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (C) 2014 Kenneth Joseph Hass</dd>
<dd>
This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</dd>
<dd>
This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details. </dd></dl>

<p>Definition in file <a class="el" href="fxopt__stmts_8c_source.html">fxopt_stmts.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a59f4847538e5f36361c3695ce3166d8d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="struct_s_i_f.html">SIF</a> addition </td>
          <td>(</td>
          <td class="paramtype">gimple_stmt_iterator *&#160;</td>
          <td class="paramname"><em>gsi_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="struct_s_i_f.html">SIF</a>&#160;</td>
          <td class="paramname"><em>oprnd_frmt</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tree&#160;</td>
          <td class="paramname"><em>oprnd_tree</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process addition and subtraction statements. </p>
<p>Examples of GIMPLE statements processed by this function: </p>
<div class="fragment"><div class="line">D.1979_6 = D.1978_5 + c1_2;</div>
<div class="line">D.1984_11 = D.1980_7 + D.1983_10;</div>
<div class="line">D.2010_60 = s1.11_58 - c1.12_59;</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">gsi_p</td><td>statement iterator, points to statement being processed </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">oprnd_frmt</td><td>array of <a class="el" href="struct_s_i_f.html" title="The structure for the SIF definition of a variable. ">SIF</a> format structs for all operands </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">oprnd_tree</td><td>array of gcc trees for the operands </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="struct_s_i_f.html" title="The structure for the SIF definition of a variable. ">SIF</a> format struct for the result </dd></dl>

<p>Definition at line <a class="el" href="fxopt__stmts_8c_source.html#l00403">403</a> of file <a class="el" href="fxopt__stmts_8c_source.html">fxopt_stmts.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;{</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_s_i_f.html">SIF</a> result_frmt;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <a class="code" href="fxopt__plugin_8h.html#a53dad240a1a2da4b6fbbb93f95fe190e">initialize_format</a>(&amp;result_frmt);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  gimple stmt = gsi_stmt(*gsi_p);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="comment">// Don&#39;t evaluate constants until we really need them, because their formats</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="comment">// are not stored and float constants will look like pure integers if</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="comment">// evaluated twice</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="keywordflow">if</span> (TREE_CONSTANT(oprnd_tree[1])) {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    oprnd_frmt[2] = <a class="code" href="fxopt__plugin_8h.html#a838f4d620efd0776323bbe5af19c60c2">get_operand_format</a>(stmt, 2, 0, <a class="code" href="fxopt__plugin_8h.html#a8b43bafee90b30676faae508c21cb8d7">PRINT</a>);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="fxopt__plugin_8h.html#a9dbaabd34c9e88d0bc5550cdea19494c">format_initialized</a>(oprnd_frmt[2])) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      oprnd_frmt[1] = <a class="code" href="fxopt__plugin_8h.html#a838f4d620efd0776323bbe5af19c60c2">get_operand_format</a>(stmt, 1, 0, <a class="code" href="fxopt__plugin_8h.html#a8b43bafee90b30676faae508c21cb8d7">PRINT</a>);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a> =</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;          oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">size</a> - oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a> - oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> -</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;          oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">E</a>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      <span class="keywordflow">return</span> result_frmt;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TREE_CONSTANT(oprnd_tree[2])) {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    oprnd_frmt[1] = <a class="code" href="fxopt__plugin_8h.html#a838f4d620efd0776323bbe5af19c60c2">get_operand_format</a>(stmt, 1, 0, <a class="code" href="fxopt__plugin_8h.html#a8b43bafee90b30676faae508c21cb8d7">PRINT</a>);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="fxopt__plugin_8h.html#a9dbaabd34c9e88d0bc5550cdea19494c">format_initialized</a>(oprnd_frmt[1])) {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      oprnd_frmt[2] = <a class="code" href="fxopt__plugin_8h.html#a838f4d620efd0776323bbe5af19c60c2">get_operand_format</a>(stmt, 2, 0, <a class="code" href="fxopt__plugin_8h.html#a8b43bafee90b30676faae508c21cb8d7">PRINT</a>);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a> =</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;          oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">size</a> - oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a> - oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> -</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;          oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">E</a>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      <span class="keywordflow">return</span> result_frmt;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="fxopt__plugin_8h.html#a9dbaabd34c9e88d0bc5550cdea19494c">format_initialized</a>(oprnd_frmt[1])) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      oprnd_frmt[1] = <a class="code" href="fxopt__plugin_8h.html#a838f4d620efd0776323bbe5af19c60c2">get_operand_format</a>(stmt, 1, 0, <a class="code" href="fxopt__plugin_8h.html#a8b43bafee90b30676faae508c21cb8d7">PRINT</a>);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="fxopt__plugin_8h.html#a9dbaabd34c9e88d0bc5550cdea19494c">format_initialized</a>(oprnd_frmt[2])) {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      oprnd_frmt[2] = <a class="code" href="fxopt__plugin_8h.html#a838f4d620efd0776323bbe5af19c60c2">get_operand_format</a>(stmt, 2, 0, <a class="code" href="fxopt__plugin_8h.html#a8b43bafee90b30676faae508c21cb8d7">PRINT</a>);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    }</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keywordflow">if</span> ((!<a class="code" href="fxopt__plugin_8h.html#a9dbaabd34c9e88d0bc5550cdea19494c">format_initialized</a>(oprnd_frmt[1]))</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        || (!<a class="code" href="fxopt__plugin_8h.html#a9dbaabd34c9e88d0bc5550cdea19494c">format_initialized</a>(oprnd_frmt[2])))</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <span class="keywordflow">return</span> result_frmt;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="comment">// Both operands are defined...here we go</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  result_frmt = oprnd_frmt[0];</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  result_frmt.<a class="code" href="struct_s_i_f.html#acba84ce8e1e8ae332cd07112a63be032">aa</a> = NULL;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="comment">// Need at least two sign bits for signed addition, at least one for unsigned</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="comment">// (oprnd_frmt.sgnd = 1 for signed, so the minimum number of sign bits is </span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="comment">// oprnd_frmt[0].sgnd+1). Signed variables are guaranteed to have S &gt; 0.</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="keywordtype">int</span> min_s_bits = oprnd_frmt[0].<a class="code" href="struct_s_i_f.html#a76e1eafe400d8c4a61af7cc6c592b058">sgnd</a> + 1;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="keywordflow">if</span> (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a> &lt; min_s_bits) {</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    fprintf(stderr, <span class="stringliteral">&quot;  OP1 needs another sign bit\n&quot;</span>);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <a class="code" href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a>(oprnd_frmt, oprnd_tree, 1, 1);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="keywordflow">if</span> (oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a> &lt; min_s_bits) {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    fprintf(stderr, <span class="stringliteral">&quot;  OP2 needs another sign bit\n&quot;</span>);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <a class="code" href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a>(oprnd_frmt, oprnd_tree, 2, 1);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="comment">// </span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="comment">// Align binary points</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="comment">// </span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="comment">// need to shift op2 left</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="fxopt__plugin_8c.html#a747818e92c2fe76221f6696c003bb5ce">BINARY_PT</a>(1) &gt; <a class="code" href="fxopt__plugin_8c.html#a747818e92c2fe76221f6696c003bb5ce">BINARY_PT</a>(2)) {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="comment">// consume redundant sign bits but keep 1 if unsigned, 2 if signed</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">if</span> (oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a> &gt; min_s_bits) {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="struct_s_i_f.html#a23d0132158a81b4458e2a3f455796d19">shift</a> = MIN((oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a> - min_s_bits),</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                      (<a class="code" href="fxopt__plugin_8c.html#a747818e92c2fe76221f6696c003bb5ce">BINARY_PT</a>(1) - <a class="code" href="fxopt__plugin_8c.html#a747818e92c2fe76221f6696c003bb5ce">BINARY_PT</a>(2)));</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <a class="code" href="fxopt__plugin_8h.html#ad4272f8a72e6c14ebd672bf1766e24af">shift_left</a>(oprnd_frmt, oprnd_tree, 2, shift);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="comment">// still not aligned, must shift op1 right</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="fxopt__plugin_8c.html#a747818e92c2fe76221f6696c003bb5ce">BINARY_PT</a>(1) &gt; <a class="code" href="fxopt__plugin_8c.html#a747818e92c2fe76221f6696c003bb5ce">BINARY_PT</a>(2)) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <a class="code" href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a>(oprnd_frmt, oprnd_tree, 1,</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                  (<a class="code" href="fxopt__plugin_8c.html#a747818e92c2fe76221f6696c003bb5ce">BINARY_PT</a>(1) - <a class="code" href="fxopt__plugin_8c.html#a747818e92c2fe76221f6696c003bb5ce">BINARY_PT</a>(2)));</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    }</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  }</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="comment">// need to shift op1 left</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="fxopt__plugin_8c.html#a747818e92c2fe76221f6696c003bb5ce">BINARY_PT</a>(2) &gt; <a class="code" href="fxopt__plugin_8c.html#a747818e92c2fe76221f6696c003bb5ce">BINARY_PT</a>(1)) {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="comment">// consume redundant sign bits but keep 1 if unsigned, 2 if signed</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">if</span> (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a> &gt; min_s_bits) {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <span class="keywordtype">int</span> shift = MIN((oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a> - min_s_bits),</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                      (<a class="code" href="fxopt__plugin_8c.html#a747818e92c2fe76221f6696c003bb5ce">BINARY_PT</a>(2) - <a class="code" href="fxopt__plugin_8c.html#a747818e92c2fe76221f6696c003bb5ce">BINARY_PT</a>(1)));</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <a class="code" href="fxopt__plugin_8h.html#ad4272f8a72e6c14ebd672bf1766e24af">shift_left</a>(oprnd_frmt, oprnd_tree, 1, shift);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    }</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="comment">// must shift op2 right</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="fxopt__plugin_8c.html#a747818e92c2fe76221f6696c003bb5ce">BINARY_PT</a>(2) &gt; <a class="code" href="fxopt__plugin_8c.html#a747818e92c2fe76221f6696c003bb5ce">BINARY_PT</a>(1)) {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <a class="code" href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a>(oprnd_frmt, oprnd_tree, 2,</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                  (<a class="code" href="fxopt__plugin_8c.html#a747818e92c2fe76221f6696c003bb5ce">BINARY_PT</a>(2) - <a class="code" href="fxopt__plugin_8c.html#a747818e92c2fe76221f6696c003bb5ce">BINARY_PT</a>(1)));</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="fxopt__plugin_8c.html#af1c2d3bd684953a9ceb6ea396153ae87">ROUNDING</a> &amp;&amp; <a class="code" href="fxopt__plugin_8c.html#ada188d171291ec2018580096123ba7e3">GUARDING</a>) {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="fxopt__plugin_8h.html#a1dc92e76034214debf80ce3ebd4a44df">rounding_may_overflow</a>(oprnd_frmt[1])</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        || <a class="code" href="fxopt__plugin_8h.html#a1dc92e76034214debf80ce3ebd4a44df">rounding_may_overflow</a>(oprnd_frmt[2])) {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <span class="comment">// Need one more sign bit in both operands to allow for overflow</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      <span class="comment">// from rounding.</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      fprintf(stderr, <span class="stringliteral">&quot;  Rounding may overflow, add another sign bit\n&quot;</span>);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <a class="code" href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a>(oprnd_frmt, oprnd_tree, 1, 1);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <a class="code" href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a>(oprnd_frmt, oprnd_tree, 2, 1);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  result_frmt.S = MIN(oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a>, oprnd_frmt[2].S) - 1;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  result_frmt.I = MAX(oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a>, oprnd_frmt[2].I) + 1;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  result_frmt.F = MAX(oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a>, oprnd_frmt[2].F);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  result_frmt.E =</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      oprnd_frmt[0].<a class="code" href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">size</a> - result_frmt.S - result_frmt.I - result_frmt.F;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_s_i_f.html">SIF</a> temp_frmt;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <a class="code" href="fxopt__plugin_8h.html#a53dad240a1a2da4b6fbbb93f95fe190e">initialize_format</a>(&amp;temp_frmt);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="keywordflow">if</span> (gimple_assign_rhs_code(stmt) == MINUS_EXPR)</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    temp_frmt = <a class="code" href="fxopt__plugin_8h.html#a3b7b4c0bc28a6775ee3506cf91d04127">new_range_sub</a>(oprnd_frmt, result_frmt);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    temp_frmt = <a class="code" href="fxopt__plugin_8h.html#a0cf7e3b5421c86af6f0a368104db9a8e">new_range_add</a>(oprnd_frmt, result_frmt);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="fxopt__plugin_8h.html#acc341add54b10c2be1635a2cd6d5d629">pessimistic_format</a>(temp_frmt) &amp;&amp; (! oprnd_frmt[0].<a class="code" href="struct_s_i_f.html#a6930dd703e6e637a2cc7c98031994d28">ptr_op</a>)) {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    fprintf(stderr,</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            <span class="stringliteral">&quot;  *** Pessimistic addition axiom, &quot;</span>);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">if</span> ((oprnd_frmt[1].shift &gt; 0) &amp;&amp; (oprnd_frmt[1].shift &gt; 0)) {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      fprintf(stderr, <span class="stringliteral">&quot;giving back a right shift *** \n&quot;</span>);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      result_frmt.I -= 1;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="fxopt__plugin_8h.html#a7b9c839fdfafa524acb81103943ef8fc">LOST_F_BITS</a>(1) &gt; 0) || (<a class="code" href="fxopt__plugin_8h.html#a7b9c839fdfafa524acb81103943ef8fc">LOST_F_BITS</a>(2) &gt; 0)) </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        result_frmt.F += 1;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        result_frmt.E += 1;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <a class="code" href="fxopt__plugin_8h.html#ad4272f8a72e6c14ebd672bf1766e24af">shift_left</a>(oprnd_frmt, oprnd_tree, 1, 1);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <a class="code" href="fxopt__plugin_8h.html#ad4272f8a72e6c14ebd672bf1766e24af">shift_left</a>(oprnd_frmt, oprnd_tree, 2, 1);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      fprintf(stderr, <span class="stringliteral">&quot;converting an I to S in result *** \n&quot;</span>);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      result_frmt.S += 1;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      result_frmt.I -= 1;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  }                             <span class="comment">// axioms are pessimistic</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <a class="code" href="fxopt__affine_8c.html#aaa3848f108434439b2d91a86bda052d3">delete_aa_list</a>(&amp;(result_frmt.aa));</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="keywordflow">if</span> (gimple_assign_rhs_code(stmt) == MINUS_EXPR)</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    result_frmt = <a class="code" href="fxopt__plugin_8h.html#a3b7b4c0bc28a6775ee3506cf91d04127">new_range_sub</a>(oprnd_frmt, result_frmt);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    result_frmt = <a class="code" href="fxopt__plugin_8h.html#a0cf7e3b5421c86af6f0a368104db9a8e">new_range_add</a>(oprnd_frmt, result_frmt);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <a class="code" href="fxopt__affine_8c.html#a8ba60d39468371b4a9352e353a938470">fix_aa_bp</a>(result_frmt);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <a class="code" href="fxopt__plugin_8h.html#aeb0183ed1543d1954cca0408ee3aa9f1">check_range</a>(result_frmt);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <a class="code" href="fxopt__affine_8c.html#aaa3848f108434439b2d91a86bda052d3">delete_aa_list</a>(&amp;(temp_frmt.aa));</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="keywordflow">return</span> result_frmt;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;}</div>
<div class="ttc" id="fxopt__plugin_8c_html_af1c2d3bd684953a9ceb6ea396153ae87"><div class="ttname"><a href="fxopt__plugin_8c.html#af1c2d3bd684953a9ceb6ea396153ae87">ROUNDING</a></div><div class="ttdeci">int ROUNDING</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8c_source.html#l00053">fxopt_plugin.c:53</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_acc341add54b10c2be1635a2cd6d5d629"><div class="ttname"><a href="fxopt__plugin_8h.html#acc341add54b10c2be1635a2cd6d5d629">pessimistic_format</a></div><div class="ttdeci">int pessimistic_format(struct SIF op_fmt)</div><div class="ttdoc">Check a SIF format for excess integer bits. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__range_8c_source.html#l00546">fxopt_range.c:546</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a6930dd703e6e637a2cc7c98031994d28"><div class="ttname"><a href="struct_s_i_f.html#a6930dd703e6e637a2cc7c98031994d28">SIF::ptr_op</a></div><div class="ttdeci">int ptr_op</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00130">fxopt_plugin.h:130</a></div></div>
<div class="ttc" id="struct_s_i_f_html_acba84ce8e1e8ae332cd07112a63be032"><div class="ttname"><a href="struct_s_i_f.html#acba84ce8e1e8ae332cd07112a63be032">SIF::aa</a></div><div class="ttdeci">struct AA * aa</div><div class="ttdoc">Pointer to affine variable list. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00137">fxopt_plugin.h:137</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a1318bc4e5913f72d1808d4e426ef85eb"><div class="ttname"><a href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">SIF::I</a></div><div class="ttdeci">int I</div><div class="ttdoc">number of integer bits in variable </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00123">fxopt_plugin.h:123</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a8b43bafee90b30676faae508c21cb8d7"><div class="ttname"><a href="fxopt__plugin_8h.html#a8b43bafee90b30676faae508c21cb8d7">PRINT</a></div><div class="ttdeci">#define PRINT</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00036">fxopt_plugin.h:36</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a9b5d27017c06b4e45f37c06d9b819181"><div class="ttname"><a href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">SIF::F</a></div><div class="ttdeci">int F</div><div class="ttdoc">number of fraction bits in variable </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00124">fxopt_plugin.h:124</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a58394f7a00b0b88fdee315fcd5ed25a1"><div class="ttname"><a href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">SIF::S</a></div><div class="ttdeci">int S</div><div class="ttdoc">number of sign bits in variable </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00122">fxopt_plugin.h:122</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a0cf7e3b5421c86af6f0a368104db9a8e"><div class="ttname"><a href="fxopt__plugin_8h.html#a0cf7e3b5421c86af6f0a368104db9a8e">new_range_add</a></div><div class="ttdeci">struct SIF new_range_add(struct SIF oprnd_frmt[], struct SIF result_frmt)</div><div class="ttdoc">Determine the range for the result of addition. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__range_8c_source.html#l00608">fxopt_range.c:608</a></div></div>
<div class="ttc" id="fxopt__affine_8c_html_a8ba60d39468371b4a9352e353a938470"><div class="ttname"><a href="fxopt__affine_8c.html#a8ba60d39468371b4a9352e353a938470">fix_aa_bp</a></div><div class="ttdeci">void fix_aa_bp(struct SIF op_fmt)</div><div class="ttdoc">Force the AA binary point to be consistent with format. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__affine_8c_source.html#l00452">fxopt_affine.c:452</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a3b7b4c0bc28a6775ee3506cf91d04127"><div class="ttname"><a href="fxopt__plugin_8h.html#a3b7b4c0bc28a6775ee3506cf91d04127">new_range_sub</a></div><div class="ttdeci">struct SIF new_range_sub(struct SIF oprnd_frmt[], struct SIF result_frmt)</div><div class="ttdoc">Determine the range for the result of subtraction. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__range_8c_source.html#l00639">fxopt_range.c:639</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_ae33fc19a65b5cae0c06120a3a3037ad7"><div class="ttname"><a href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a></div><div class="ttdeci">void shift_right(struct SIF oprnd_frmt[], tree oprnd_tree[], int opnumber, int count)</div><div class="ttdoc">Perform a right shift on an SIF format. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l01651">fxopt_utils.c:1651</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a838f4d620efd0776323bbe5af19c60c2"><div class="ttname"><a href="fxopt__plugin_8h.html#a838f4d620efd0776323bbe5af19c60c2">get_operand_format</a></div><div class="ttdeci">struct SIF get_operand_format(gimple stmt, int op_number, int element_number, bool print)</div><div class="ttdoc">Determine the SIF format of a statement operand. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l01152">fxopt_utils.c:1152</a></div></div>
<div class="ttc" id="fxopt__affine_8c_html_aaa3848f108434439b2d91a86bda052d3"><div class="ttname"><a href="fxopt__affine_8c.html#aaa3848f108434439b2d91a86bda052d3">delete_aa_list</a></div><div class="ttdeci">void delete_aa_list(struct AA **aa_list_pp)</div><div class="ttdoc">Delete an entire AA definition. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__affine_8c_source.html#l00251">fxopt_affine.c:251</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a76e1eafe400d8c4a61af7cc6c592b058"><div class="ttname"><a href="struct_s_i_f.html#a76e1eafe400d8c4a61af7cc6c592b058">SIF::sgnd</a></div><div class="ttdeci">int sgnd</div><div class="ttdoc">1 if signed, 0 if unsigned </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00132">fxopt_plugin.h:132</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a9dbaabd34c9e88d0bc5550cdea19494c"><div class="ttname"><a href="fxopt__plugin_8h.html#a9dbaabd34c9e88d0bc5550cdea19494c">format_initialized</a></div><div class="ttdeci">int format_initialized(struct SIF oprnd_frmt)</div><div class="ttdoc">Predicate for an initialized format specification. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l01738">fxopt_utils.c:1738</a></div></div>
<div class="ttc" id="fxopt__plugin_8c_html_ada188d171291ec2018580096123ba7e3"><div class="ttname"><a href="fxopt__plugin_8c.html#ada188d171291ec2018580096123ba7e3">GUARDING</a></div><div class="ttdeci">int GUARDING</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8c_source.html#l00052">fxopt_plugin.c:52</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a1dc92e76034214debf80ce3ebd4a44df"><div class="ttname"><a href="fxopt__plugin_8h.html#a1dc92e76034214debf80ce3ebd4a44df">rounding_may_overflow</a></div><div class="ttdeci">int rounding_may_overflow(struct SIF op_fmt)</div><div class="ttdoc">Determine whether rounding before a shift could cause an overflow. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__range_8c_source.html#l00260">fxopt_range.c:260</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a7b9c839fdfafa524acb81103943ef8fc"><div class="ttname"><a href="fxopt__plugin_8h.html#a7b9c839fdfafa524acb81103943ef8fc">LOST_F_BITS</a></div><div class="ttdeci">#define LOST_F_BITS(x)</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00059">fxopt_plugin.h:59</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a464166f19006c30663e2465d606c8a07"><div class="ttname"><a href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">SIF::size</a></div><div class="ttdeci">int size</div><div class="ttdoc">size of this variable, in bits </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00127">fxopt_plugin.h:127</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_ad4272f8a72e6c14ebd672bf1766e24af"><div class="ttname"><a href="fxopt__plugin_8h.html#ad4272f8a72e6c14ebd672bf1766e24af">shift_left</a></div><div class="ttdeci">void shift_left(struct SIF oprnd_frmt[], tree oprnd_tree[], int opnumber, int count)</div><div class="ttdoc">Shift an SIF format left. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l01684">fxopt_utils.c:1684</a></div></div>
<div class="ttc" id="struct_s_i_f_html"><div class="ttname"><a href="struct_s_i_f.html">SIF</a></div><div class="ttdoc">The structure for the SIF definition of a variable. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00115">fxopt_plugin.h:115</a></div></div>
<div class="ttc" id="struct_s_i_f_html_afd01784fd231aef78ec423aa509f2715"><div class="ttname"><a href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">SIF::E</a></div><div class="ttdeci">int E</div><div class="ttdoc">number of empty bits to the right of F bits </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00125">fxopt_plugin.h:125</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a23d0132158a81b4458e2a3f455796d19"><div class="ttname"><a href="struct_s_i_f.html#a23d0132158a81b4458e2a3f455796d19">SIF::shift</a></div><div class="ttdeci">int shift</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00128">fxopt_plugin.h:128</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_aeb0183ed1543d1954cca0408ee3aa9f1"><div class="ttname"><a href="fxopt__plugin_8h.html#aeb0183ed1543d1954cca0408ee3aa9f1">check_range</a></div><div class="ttdeci">void check_range(struct SIF op_fmt)</div><div class="ttdoc">Check for valid range. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__range_8c_source.html#l00287">fxopt_range.c:287</a></div></div>
<div class="ttc" id="fxopt__plugin_8c_html_a747818e92c2fe76221f6696c003bb5ce"><div class="ttname"><a href="fxopt__plugin_8c.html#a747818e92c2fe76221f6696c003bb5ce">BINARY_PT</a></div><div class="ttdeci">#define BINARY_PT(x)</div><div class="ttdoc">Number of bits to the right of the binary point. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8c_source.html#l00034">fxopt_plugin.c:34</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a53dad240a1a2da4b6fbbb93f95fe190e"><div class="ttname"><a href="fxopt__plugin_8h.html#a53dad240a1a2da4b6fbbb93f95fe190e">initialize_format</a></div><div class="ttdeci">void initialize_format(struct SIF *op_fmt)</div><div class="ttdoc">Initialize the SIF definition for a variable. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l00219">fxopt_utils.c:219</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8c7b897df9c5878b8eff6928f47b9987"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="struct_s_i_f.html">SIF</a> array_ref </td>
          <td>(</td>
          <td class="paramtype">gimple_stmt_iterator *&#160;</td>
          <td class="paramname"><em>gsi_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="struct_s_i_f.html">SIF</a>&#160;</td>
          <td class="paramname"><em>oprnd_frmt</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tree&#160;</td>
          <td class="paramname"><em>oprnd_tree</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process ARRAY_REF (array reference) statements. </p>
<p>In general, the format of the result is set to be the same as the format of the RHS operand, considering the array index.</p>
<p>Examples of GIMPLE statements processed by this function: </p>
<div class="fragment"><div class="line">D.1989_16 = data[3];</div>
<div class="line">x5_28 = *D.1985_27[5];</div>
<div class="line">x2_133 = *D.2065_132[col_2];</div>
</div><!-- fragment --><dl class="section warning"><dt>Warning</dt><dd>Casts from unsigned to signed may be untested</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">gsi_p</td><td>statement iterator, points to statement being processed </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">oprnd_frmt</td><td>array of <a class="el" href="struct_s_i_f.html" title="The structure for the SIF definition of a variable. ">SIF</a> format structs for all operands </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">oprnd_tree</td><td>array of gcc trees for the operands </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="struct_s_i_f.html" title="The structure for the SIF definition of a variable. ">SIF</a> format struct for the result </dd></dl>

<p>Definition at line <a class="el" href="fxopt__stmts_8c_source.html#l00211">211</a> of file <a class="el" href="fxopt__stmts_8c_source.html">fxopt_stmts.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;{</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keywordtype">bool</span> AA_mode = <a class="code" href="fxopt__plugin_8h.html#a97fe5470fb1ac167c713671655ff3e52">ADD</a>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_s_i_f.html">SIF</a> result_frmt;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <a class="code" href="fxopt__plugin_8h.html#a53dad240a1a2da4b6fbbb93f95fe190e">initialize_format</a>(&amp;result_frmt);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  gimple stmt = gsi_stmt(*gsi_p);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  oprnd_frmt[1] = <a class="code" href="fxopt__plugin_8h.html#a838f4d620efd0776323bbe5af19c60c2">get_operand_format</a>(stmt, 1, 0, <a class="code" href="fxopt__plugin_8h.html#a8b43bafee90b30676faae508c21cb8d7">PRINT</a>);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordflow">if</span> (! <a class="code" href="fxopt__plugin_8h.html#a9dbaabd34c9e88d0bc5550cdea19494c">format_initialized</a>(oprnd_frmt[1]))</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keywordflow">return</span> result_frmt;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="comment">// If the RHS is an entire array then the result_frmt is the format</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="comment">// of the first element. Doesn&#39;t matter, since shift is zero nothing</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="comment">// will be done to the elements</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  result_frmt = oprnd_frmt[0];  <span class="comment">// shallow copy</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  result_frmt.<a class="code" href="struct_s_i_f.html#acba84ce8e1e8ae332cd07112a63be032">aa</a> = NULL;        <span class="comment">// don&#39;t let copy_SIF trash op0 aa list</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <a class="code" href="fxopt__plugin_8h.html#a16e2f15bd22d9f8fa1435bb3111d5b1b">copy_SIF</a>(&amp;oprnd_frmt[1], &amp;result_frmt);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="comment">// If store to memory, try to do trivial fixes to preserve the pointer</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="comment">//   format but copy the new min/max</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">if</span> (oprnd_frmt[0].<a class="code" href="struct_s_i_f.html#a6930dd703e6e637a2cc7c98031994d28">ptr_op</a> &amp;&amp; (!oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a6930dd703e6e637a2cc7c98031994d28">ptr_op</a>)) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="comment">// Need to move binary point?</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordtype">int</span> bp_diff = (oprnd_frmt[0].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a> + oprnd_frmt[0].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a>) -</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        (result_frmt.S + result_frmt.I);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">if</span> (bp_diff &gt; 0) {          <span class="comment">// move right</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <a class="code" href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a>(oprnd_frmt, oprnd_tree, 1, bp_diff);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bp_diff &lt; 0) {   <span class="comment">// move left, if extra S bits</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <span class="keywordflow">if</span> ((bp_diff + oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a>) &gt; 0) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <a class="code" href="fxopt__plugin_8h.html#ad4272f8a72e6c14ebd672bf1766e24af">shift_left</a>(oprnd_frmt, oprnd_tree, 1, bp_diff);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <a class="code" href="fxopt__plugin_8h.html#ace046b3f15f31d2cdb41c1126fd00517">error</a>(<span class="stringliteral">&quot;fxopt: could not preserve pointer format&quot;</span>);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    result_frmt.min = <a class="code" href="fxopt__plugin_8h.html#a5a592200e0275bca4d5db1146bd63057">new_min</a>(oprnd_frmt[1]);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    result_frmt.max = <a class="code" href="fxopt__plugin_8h.html#a76efbc1546781f32b4c053a0729d331d">new_max</a>(oprnd_frmt[1]);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  result_frmt.E =</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      result_frmt.size - result_frmt.S - result_frmt.I - result_frmt.F;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <a class="code" href="fxopt__affine_8c.html#aaa3848f108434439b2d91a86bda052d3">delete_aa_list</a>(&amp;(result_frmt.aa));</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  result_frmt.aa = <a class="code" href="fxopt__affine_8c.html#adef7370a316f4892d31135bb831c4b41">affine_assign</a>(oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#acba84ce8e1e8ae332cd07112a63be032">aa</a>, AA_mode);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="comment">// Deal with the other members of an array</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">if</span> ((TREE_CODE(TREE_TYPE(oprnd_tree[1])) == ARRAY_TYPE) &amp;&amp;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      (gimple_assign_rhs_code(stmt) == VAR_DECL)) {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordtype">int</span> low_bound =</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        TREE_INT_CST_LOW(TYPE_MIN_VALUE</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                         (TYPE_DOMAIN(oprnd_tree[1]-&gt;common.type)));</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordtype">int</span> high_bound =</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        TREE_INT_CST_LOW(TYPE_MAX_VALUE</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                         (TYPE_DOMAIN(oprnd_tree[1]-&gt;common.type)));</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordtype">int</span> elements = high_bound - low_bound + 1;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">// Deal with arrays...create a format for every element</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordtype">int</span> element_size = DECL_SIZE(oprnd_tree[1])</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        ? (TREE_INT_CST_LOW(DECL_SIZE(oprnd_tree[1])) / elements) : 0;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">if</span> (element_size &gt; 0) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="keywordtype">int</span> index;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="keyword">struct </span><a class="code" href="struct_s_i_f.html">SIF</a> *var_fmt, *op_fmt;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="keywordflow">for</span> (index = low_bound; index &lt;= high_bound; index++) {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        var_fmt = <a class="code" href="fxopt__plugin_8h.html#a6fa27c9a550736bb1bbd016f4feb2db4">find_var_format</a>(<a class="code" href="fxopt__plugin_8h.html#a2c6cddb4dccafd9e7d1307ea3e1373a6">calc_hash_key</a>(oprnd_tree[1], 0, index));</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        op_fmt = <a class="code" href="fxopt__plugin_8h.html#a6fa27c9a550736bb1bbd016f4feb2db4">find_var_format</a>(<a class="code" href="fxopt__plugin_8h.html#a2c6cddb4dccafd9e7d1307ea3e1373a6">calc_hash_key</a>(oprnd_tree[0], 0, index));</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a> = var_fmt-&gt;<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a> = var_fmt-&gt;<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> = var_fmt-&gt;<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        op_fmt-&gt;<a class="code" href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">E</a> = op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">size</a> - op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a> - op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a> - op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a584bf30db787408850e826a9e25d7816">min</a> = var_fmt-&gt;<a class="code" href="struct_s_i_f.html#a584bf30db787408850e826a9e25d7816">min</a>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a564d283d3bb41651e593c62e2f46d079">max</a> = var_fmt-&gt;<a class="code" href="struct_s_i_f.html#a564d283d3bb41651e593c62e2f46d079">max</a>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a76e1eafe400d8c4a61af7cc6c592b058">sgnd</a> = var_fmt-&gt;<a class="code" href="struct_s_i_f.html#a76e1eafe400d8c4a61af7cc6c592b058">sgnd</a>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a23d0132158a81b4458e2a3f455796d19">shift</a> = 0;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <a class="code" href="fxopt__affine_8c.html#aaa3848f108434439b2d91a86bda052d3">delete_aa_list</a>(&amp;(op_fmt-&gt;<a class="code" href="struct_s_i_f.html#acba84ce8e1e8ae332cd07112a63be032">aa</a>));</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        op_fmt-&gt;<a class="code" href="struct_s_i_f.html#acba84ce8e1e8ae332cd07112a63be032">aa</a> = <a class="code" href="fxopt__affine_8c.html#a3f2aac7e6cbba545edc4d4545d2322df">copy_aa_list</a>(result_frmt.aa);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;     [%2d]  (%2d/%2d/%2d/%2d)  [%+5.3f,%+5.3f]\n&quot;</span>,</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                index, op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a>, op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a>, op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a>, op_fmt-&gt;<a class="code" href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">E</a>,</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                <a class="code" href="fxopt__plugin_8h.html#a9aff6a1aa064b1cb988a5f62c7b1a331">real_min</a>(op_fmt), <a class="code" href="fxopt__plugin_8h.html#a22781c7f4b2c2e46cd5d52fe0b64a68f">real_max</a>(op_fmt));</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keywordflow">return</span> result_frmt;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;}</div>
<div class="ttc" id="fxopt__affine_8c_html_a3f2aac7e6cbba545edc4d4545d2322df"><div class="ttname"><a href="fxopt__affine_8c.html#a3f2aac7e6cbba545edc4d4545d2322df">copy_aa_list</a></div><div class="ttdeci">struct AA * copy_aa_list(struct AA *aa_src_list_p)</div><div class="ttdoc">Copy an AA list. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__affine_8c_source.html#l00303">fxopt_affine.c:303</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a6930dd703e6e637a2cc7c98031994d28"><div class="ttname"><a href="struct_s_i_f.html#a6930dd703e6e637a2cc7c98031994d28">SIF::ptr_op</a></div><div class="ttdeci">int ptr_op</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00130">fxopt_plugin.h:130</a></div></div>
<div class="ttc" id="struct_s_i_f_html_acba84ce8e1e8ae332cd07112a63be032"><div class="ttname"><a href="struct_s_i_f.html#acba84ce8e1e8ae332cd07112a63be032">SIF::aa</a></div><div class="ttdeci">struct AA * aa</div><div class="ttdoc">Pointer to affine variable list. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00137">fxopt_plugin.h:137</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a1318bc4e5913f72d1808d4e426ef85eb"><div class="ttname"><a href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">SIF::I</a></div><div class="ttdeci">int I</div><div class="ttdoc">number of integer bits in variable </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00123">fxopt_plugin.h:123</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a8b43bafee90b30676faae508c21cb8d7"><div class="ttname"><a href="fxopt__plugin_8h.html#a8b43bafee90b30676faae508c21cb8d7">PRINT</a></div><div class="ttdeci">#define PRINT</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00036">fxopt_plugin.h:36</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a9b5d27017c06b4e45f37c06d9b819181"><div class="ttname"><a href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">SIF::F</a></div><div class="ttdeci">int F</div><div class="ttdoc">number of fraction bits in variable </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00124">fxopt_plugin.h:124</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a58394f7a00b0b88fdee315fcd5ed25a1"><div class="ttname"><a href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">SIF::S</a></div><div class="ttdeci">int S</div><div class="ttdoc">number of sign bits in variable </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00122">fxopt_plugin.h:122</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a6fa27c9a550736bb1bbd016f4feb2db4"><div class="ttname"><a href="fxopt__plugin_8h.html#a6fa27c9a550736bb1bbd016f4feb2db4">find_var_format</a></div><div class="ttdeci">struct SIF * find_var_format(int var_id)</div><div class="ttdoc">Find/create a pointer to a SIF, given its hash key. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l00171">fxopt_utils.c:171</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a97fe5470fb1ac167c713671655ff3e52"><div class="ttname"><a href="fxopt__plugin_8h.html#a97fe5470fb1ac167c713671655ff3e52">ADD</a></div><div class="ttdeci">#define ADD</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00039">fxopt_plugin.h:39</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a584bf30db787408850e826a9e25d7816"><div class="ttname"><a href="struct_s_i_f.html#a584bf30db787408850e826a9e25d7816">SIF::min</a></div><div class="ttdeci">double_int min</div><div class="ttdoc">Minimum possible value. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00136">fxopt_plugin.h:136</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a76efbc1546781f32b4c053a0729d331d"><div class="ttname"><a href="fxopt__plugin_8h.html#a76efbc1546781f32b4c053a0729d331d">new_max</a></div><div class="ttdeci">double_int new_max(struct SIF op_fmt)</div><div class="ttdoc">Calculate range max after shift. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__range_8c_source.html#l00173">fxopt_range.c:173</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_ae33fc19a65b5cae0c06120a3a3037ad7"><div class="ttname"><a href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a></div><div class="ttdeci">void shift_right(struct SIF oprnd_frmt[], tree oprnd_tree[], int opnumber, int count)</div><div class="ttdoc">Perform a right shift on an SIF format. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l01651">fxopt_utils.c:1651</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a838f4d620efd0776323bbe5af19c60c2"><div class="ttname"><a href="fxopt__plugin_8h.html#a838f4d620efd0776323bbe5af19c60c2">get_operand_format</a></div><div class="ttdeci">struct SIF get_operand_format(gimple stmt, int op_number, int element_number, bool print)</div><div class="ttdoc">Determine the SIF format of a statement operand. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l01152">fxopt_utils.c:1152</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a564d283d3bb41651e593c62e2f46d079"><div class="ttname"><a href="struct_s_i_f.html#a564d283d3bb41651e593c62e2f46d079">SIF::max</a></div><div class="ttdeci">double_int max</div><div class="ttdoc">Maximum possible value. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00135">fxopt_plugin.h:135</a></div></div>
<div class="ttc" id="fxopt__affine_8c_html_aaa3848f108434439b2d91a86bda052d3"><div class="ttname"><a href="fxopt__affine_8c.html#aaa3848f108434439b2d91a86bda052d3">delete_aa_list</a></div><div class="ttdeci">void delete_aa_list(struct AA **aa_list_pp)</div><div class="ttdoc">Delete an entire AA definition. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__affine_8c_source.html#l00251">fxopt_affine.c:251</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a76e1eafe400d8c4a61af7cc6c592b058"><div class="ttname"><a href="struct_s_i_f.html#a76e1eafe400d8c4a61af7cc6c592b058">SIF::sgnd</a></div><div class="ttdeci">int sgnd</div><div class="ttdoc">1 if signed, 0 if unsigned </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00132">fxopt_plugin.h:132</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a16e2f15bd22d9f8fa1435bb3111d5b1b"><div class="ttname"><a href="fxopt__plugin_8h.html#a16e2f15bd22d9f8fa1435bb3111d5b1b">copy_SIF</a></div><div class="ttdeci">void copy_SIF(struct SIF *src, struct SIF *dest)</div><div class="ttdoc">Copy the SIF format of one variable to another. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l00279">fxopt_utils.c:279</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a9dbaabd34c9e88d0bc5550cdea19494c"><div class="ttname"><a href="fxopt__plugin_8h.html#a9dbaabd34c9e88d0bc5550cdea19494c">format_initialized</a></div><div class="ttdeci">int format_initialized(struct SIF oprnd_frmt)</div><div class="ttdoc">Predicate for an initialized format specification. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l01738">fxopt_utils.c:1738</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a5a592200e0275bca4d5db1146bd63057"><div class="ttname"><a href="fxopt__plugin_8h.html#a5a592200e0275bca4d5db1146bd63057">new_min</a></div><div class="ttdeci">double_int new_min(struct SIF op_fmt)</div><div class="ttdoc">Calculate range min after shift. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__range_8c_source.html#l00220">fxopt_range.c:220</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a22781c7f4b2c2e46cd5d52fe0b64a68f"><div class="ttname"><a href="fxopt__plugin_8h.html#a22781c7f4b2c2e46cd5d52fe0b64a68f">real_max</a></div><div class="ttdeci">float real_max(struct SIF *op_fmt)</div><div class="ttdoc">Return range maximum as a floating-point value. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l00304">fxopt_utils.c:304</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a464166f19006c30663e2465d606c8a07"><div class="ttname"><a href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">SIF::size</a></div><div class="ttdeci">int size</div><div class="ttdoc">size of this variable, in bits </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00127">fxopt_plugin.h:127</a></div></div>
<div class="ttc" id="fxopt__affine_8c_html_adef7370a316f4892d31135bb831c4b41"><div class="ttname"><a href="fxopt__affine_8c.html#adef7370a316f4892d31135bb831c4b41">affine_assign</a></div><div class="ttdeci">struct AA * affine_assign(struct AA *aa_src_list_p, bool add)</div><div class="ttdoc">Determine affine result of a simple assignment statement. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__affine_8c_source.html#l00335">fxopt_affine.c:335</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_ad4272f8a72e6c14ebd672bf1766e24af"><div class="ttname"><a href="fxopt__plugin_8h.html#ad4272f8a72e6c14ebd672bf1766e24af">shift_left</a></div><div class="ttdeci">void shift_left(struct SIF oprnd_frmt[], tree oprnd_tree[], int opnumber, int count)</div><div class="ttdoc">Shift an SIF format left. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l01684">fxopt_utils.c:1684</a></div></div>
<div class="ttc" id="struct_s_i_f_html"><div class="ttname"><a href="struct_s_i_f.html">SIF</a></div><div class="ttdoc">The structure for the SIF definition of a variable. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00115">fxopt_plugin.h:115</a></div></div>
<div class="ttc" id="struct_s_i_f_html_afd01784fd231aef78ec423aa509f2715"><div class="ttname"><a href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">SIF::E</a></div><div class="ttdeci">int E</div><div class="ttdoc">number of empty bits to the right of F bits </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00125">fxopt_plugin.h:125</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a2c6cddb4dccafd9e7d1307ea3e1373a6"><div class="ttname"><a href="fxopt__plugin_8h.html#a2c6cddb4dccafd9e7d1307ea3e1373a6">calc_hash_key</a></div><div class="ttdeci">int calc_hash_key(tree var_tree, int version, int index)</div><div class="ttdoc">Calculate the hash key for the SIF formats. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l00068">fxopt_utils.c:68</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a9aff6a1aa064b1cb988a5f62c7b1a331"><div class="ttname"><a href="fxopt__plugin_8h.html#a9aff6a1aa064b1cb988a5f62c7b1a331">real_min</a></div><div class="ttdeci">float real_min(struct SIF *op_fmt)</div><div class="ttdoc">Return range minimum as a floating-point value. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l00316">fxopt_utils.c:316</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a23d0132158a81b4458e2a3f455796d19"><div class="ttname"><a href="struct_s_i_f.html#a23d0132158a81b4458e2a3f455796d19">SIF::shift</a></div><div class="ttdeci">int shift</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00128">fxopt_plugin.h:128</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_ace046b3f15f31d2cdb41c1126fd00517"><div class="ttname"><a href="fxopt__plugin_8h.html#ace046b3f15f31d2cdb41c1126fd00517">error</a></div><div class="ttdeci">void error(const char *,...)</div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a53dad240a1a2da4b6fbbb93f95fe190e"><div class="ttname"><a href="fxopt__plugin_8h.html#a53dad240a1a2da4b6fbbb93f95fe190e">initialize_format</a></div><div class="ttdeci">void initialize_format(struct SIF *op_fmt)</div><div class="ttdoc">Initialize the SIF definition for a variable. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l00219">fxopt_utils.c:219</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a36e1ee30cfaf69fcd060d9cb6f111ebd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="struct_s_i_f.html">SIF</a> division </td>
          <td>(</td>
          <td class="paramtype">gimple_stmt_iterator *&#160;</td>
          <td class="paramname"><em>gsi_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="struct_s_i_f.html">SIF</a>&#160;</td>
          <td class="paramname"><em>oprnd_frmt</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tree&#160;</td>
          <td class="paramname"><em>oprnd_tree</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Integer division. </p>
<p>Determine what formatting is needed for the dividend and divisor before the divsion can be performed, and determine the format for the resulting format.</p>
<p>If the option for converting constant division to multiplication by the inverse is enabled, then just calculate the reciprocal of the constant, change the operation to multiplication, and call the function that processes multiplication statements.</p>
<p>If the divisor is a constant equal to an integer power of 2, then a virtual shift is performed. The binary point is moved as needed and the statement is converted to a NOP assignment.</p>
<p>Examples of GIMPLE statements processed by this function: </p>
<div class="fragment"><div class="line">D.1977_4 = D.1976_3 / 4.096e+3;</div>
<div class="line">D.1979_8 = D.1978_7 / 5.0e+0;</div>
<div class="line">D.1983_11 = InVal_4(D) / D.1982_10;</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">gsi_p</td><td>statement iterator, points to statement being processed </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">oprnd_frmt</td><td>array of <a class="el" href="struct_s_i_f.html" title="The structure for the SIF definition of a variable. ">SIF</a> format structs for all operands </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">oprnd_tree</td><td>array of gcc trees for the operands </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="struct_s_i_f.html" title="The structure for the SIF definition of a variable. ">SIF</a> format struct for the result </dd></dl>

<p>Definition at line <a class="el" href="fxopt__stmts_8c_source.html#l00878">878</a> of file <a class="el" href="fxopt__stmts_8c_source.html">fxopt_stmts.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;{</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  gimple stmt, new_stmt;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_s_i_f.html">SIF</a> result_frmt;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <a class="code" href="fxopt__plugin_8h.html#a53dad240a1a2da4b6fbbb93f95fe190e">initialize_format</a>(&amp;result_frmt);</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  stmt = gsi_stmt(*gsi_p);</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="comment">// If divisor is a constant, multiply by the inverse instead</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="fxopt__plugin_8c.html#aa4db879108a0bab1bc4906f569622202">CONST_DIV_TO_MULT</a> &amp;&amp; TREE_CONSTANT(oprnd_tree[2])) {</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <a class="code" href="fxopt__plugin_8h.html#aeae9f1259640b21f702df96e9b56d2a1">invert_constant_operand</a>(stmt, 2);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    gimple_assign_set_rhs_code(stmt, MULT_EXPR);</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    update_stmt(stmt);</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <a class="code" href="fxopt__plugin_8h.html#a876c8b44be0037b8595d6cca4e4da2f6">print_gimple_stmt</a>(stderr, stmt, 2, 0);</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    result_frmt = <a class="code" href="fxopt__stmts_8c.html#abee316a4cfbde39a6337009ee53eda6a">multiplication</a>(gsi_p, oprnd_frmt, oprnd_tree);</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    oprnd_frmt[1] = <a class="code" href="fxopt__plugin_8h.html#a838f4d620efd0776323bbe5af19c60c2">get_operand_format</a>(stmt, 1, 0, <a class="code" href="fxopt__plugin_8h.html#a8b43bafee90b30676faae508c21cb8d7">PRINT</a>);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="fxopt__plugin_8h.html#a9dbaabd34c9e88d0bc5550cdea19494c">format_initialized</a>(oprnd_frmt[1])) {</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      oprnd_frmt[2] = <a class="code" href="fxopt__plugin_8h.html#a838f4d620efd0776323bbe5af19c60c2">get_operand_format</a>(stmt, 2, 0, <a class="code" href="fxopt__plugin_8h.html#a8b43bafee90b30676faae508c21cb8d7">PRINT</a>);</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="fxopt__plugin_8h.html#a9dbaabd34c9e88d0bc5550cdea19494c">format_initialized</a>(oprnd_frmt[2])) {</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        <span class="comment">// Both operands initialized...here we go</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        result_frmt = oprnd_frmt[0];</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        result_frmt.<a class="code" href="struct_s_i_f.html#acba84ce8e1e8ae332cd07112a63be032">aa</a> = NULL;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        <span class="comment">// Special case of operand is 2^K</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        <span class="comment">// Will cause a &quot;virtual shift&quot; of other RHS operand</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        <span class="comment">// </span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        <span class="comment">// If log2_range returns -1 then operand is not 2^K</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <span class="comment">// This k value is for the double_int stored for the constant and</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        <span class="comment">// therefore must be non-negative</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        <span class="keywordtype">int</span> k = <a class="code" href="fxopt__plugin_8h.html#a4b66534dd81780e018fd238b11bad1b1">log2_range</a>(oprnd_frmt[2]);</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        <span class="keywordflow">if</span> (k &gt;= 0) {</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;          <span class="comment">// </span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;          <span class="comment">// Determine effective exponent for a constant with the given</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;          <span class="comment">// SIF format</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;          k = k - oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> - oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">E</a>;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;          <span class="comment">// If k &gt; 0, division will move the binary point to the left.</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;          <span class="comment">// Make sure we have enough integer bits in the dividend.</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;          <span class="keywordflow">if</span> (k &gt; oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a>)</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;              <a class="code" href="fxopt__plugin_8h.html#ace046b3f15f31d2cdb41c1126fd00517">error</a>(<span class="stringliteral">&quot;fxopt: divide by 2^K, K too big&quot;</span>);</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;          <span class="keywordflow">if</span> ((k + oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> + oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">E</a>) &lt; 0)</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            <a class="code" href="fxopt__plugin_8h.html#ace046b3f15f31d2cdb41c1126fd00517">error</a>(<span class="stringliteral">&quot;fxopt: divide by 2^(-K), K too big&quot;</span>);</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;          fprintf(stderr, <span class="stringliteral">&quot;  virtual shift, binary point moved %d bits\n&quot;</span>, k);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="fxopt__plugin_8c.html#a56edbda4dd15509d5347fa917ea5b9ed">lastpass</a>) {</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            <span class="keywordflow">if</span> (tree_int_cst_sign_bit(oprnd_tree[2])) {</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;              <span class="comment">// constant is -2^k, must negate </span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;              new_stmt =</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                  gimple_build_assign_with_ops(NEGATE_EXPR,</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                                               oprnd_tree[0], oprnd_tree[1],</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                                               NULL);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;              new_stmt =</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                  gimple_build_assign_with_ops(NOP_EXPR, oprnd_tree[0],</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                                               oprnd_tree[1], NULL);</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            }</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            <a class="code" href="fxopt__plugin_8h.html#a876c8b44be0037b8595d6cca4e4da2f6">print_gimple_stmt</a>(stderr, new_stmt, 2, 0);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            gsi_replace(gsi_p, new_stmt, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            oprnd_tree[2] = NULL;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;          }</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;          result_frmt.I = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a> - k;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;          <span class="keywordflow">if</span> ((oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> + k) &gt;= 0) {</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;            result_frmt.F = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> + k;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;            result_frmt.E = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">E</a>;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;            result_frmt.F = 0;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;            result_frmt.E = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">E</a> + k - oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a>;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;          }</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;          result_frmt.aa = <a class="code" href="fxopt__affine_8c.html#a6aaff3bb26178b836efd99cf279fbdbf">shift_aa_list</a>(oprnd_frmt[1], -k);</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;          result_frmt.S = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a>;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;          result_frmt.max = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a564d283d3bb41651e593c62e2f46d079">max</a>;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;          result_frmt.min = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a584bf30db787408850e826a9e25d7816">min</a>;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;          result_frmt.shift = 0;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;          <span class="comment">// </span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;          <span class="comment">// Extra sign bits in the numerator create extra sign bits in the</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;          <span class="comment">// result, which reduces the number of info bits, so discard them</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;          <span class="comment">// </span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;          <span class="keywordflow">if</span> (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a> &gt; 1)</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;            <a class="code" href="fxopt__plugin_8h.html#ad4272f8a72e6c14ebd672bf1766e24af">shift_left</a>(oprnd_frmt, oprnd_tree, 1, (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a> - 1));</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;          <span class="comment">// </span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;          <span class="comment">// Adjust the number of fraction bits in the numerator to reflect </span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;          <span class="comment">// the number of fraction bit _positions_ rather than actual</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;          <span class="comment">// information fraction bits</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;          <span class="comment">// </span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;          <span class="keywordflow">if</span> (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> !=</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;              (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">size</a> - oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a> - oprnd_frmt[1].I)) {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;            oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> =</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">size</a> - oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a> - oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a>;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;            oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">E</a> = 0;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;  OP1 cast to (%2d/%2d/%2d/%2d)\n&quot;</span>,</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                    oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a>, oprnd_frmt[1].I, oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a>,</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                    oprnd_frmt[1].E);</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;          }</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;          <span class="comment">// </span></div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;          <span class="comment">// Right-justify the divisor, discarding empty bits</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;          <span class="comment">// </span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;          <a class="code" href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a>(oprnd_frmt, oprnd_tree, 2, oprnd_frmt[2].E);</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;          <span class="comment">// </span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;          <span class="comment">// Set the number of information bits in the denominator</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;          <span class="comment">// to be no greater than half of the number of information bits</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;          <span class="comment">// in the numerator.</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;          <span class="keywordflow">if</span> ((oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> + oprnd_frmt[2].I) &gt;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;              ((oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> + oprnd_frmt[1].I) / 2)) {</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            <span class="keywordtype">int</span> shiftconst =</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                ((oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> + oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a>) -</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                 (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> + oprnd_frmt[1].I) / 2);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;            shiftconst = MIN(shiftconst, oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a>);</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            <a class="code" href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a>(oprnd_frmt, oprnd_tree, 2, shiftconst);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;  OP2 heuristically adjusted for division\n&quot;</span>);</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;          }</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;          <span class="comment">// </span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;          <span class="comment">// The denominator must not have more fraction bits than the</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;          <span class="comment">// numerator...discard fraction bits from the denominator</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;          <span class="comment">// </span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;          <span class="keywordflow">if</span> (oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> &gt; oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a>) {</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="struct_s_i_f.html#a23d0132158a81b4458e2a3f455796d19">shift</a> = oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> - oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a>;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;            <span class="keywordflow">if</span> (shift &gt; 0) {</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;              <a class="code" href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a>(oprnd_frmt, oprnd_tree, 2, shift);</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;              fprintf(stderr, <span class="stringliteral">&quot;  OP2 truncated to (%2d/%2d/%2d/%2d)\n&quot;</span>,</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;                      oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a>, oprnd_frmt[2].I, oprnd_frmt[2].F,</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                      oprnd_frmt[2].E);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;              <a class="code" href="fxopt__plugin_8h.html#ace046b3f15f31d2cdb41c1126fd00517">error</a>(<span class="stringliteral">&quot;fxopt plugin FAILED to process a division&quot;</span>);</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;              <span class="keywordflow">return</span> result_frmt;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;            }</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;          }</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;          <span class="comment">// </span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;          <span class="comment">// The sum of the integer bits in the numerator plus the fraction</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;          <span class="comment">// bits in the denominator must be less than the size of the LHS.</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;          <span class="comment">// The only option is to discard denominator fraction bits</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;          <span class="comment">// </span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;          <span class="keywordflow">if</span> ((oprnd_frmt[1].I + oprnd_frmt[2].F) &gt;= oprnd_frmt[0].<a class="code" href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">size</a>) {</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;            <span class="keywordtype">int</span> shift = oprnd_frmt[0].<a class="code" href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">size</a> - oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a> + 1;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;            <span class="keywordflow">if</span> ((shift &gt; 0) &amp; (shift &lt;= oprnd_frmt[2].F)) {</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;              <a class="code" href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a>(oprnd_frmt, oprnd_tree, 2, shift);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;              <a class="code" href="fxopt__plugin_8h.html#ace046b3f15f31d2cdb41c1126fd00517">error</a>(<span class="stringliteral">&quot;fxopt plugin FAILED to process a division&quot;</span>);</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;              <span class="keywordflow">return</span> result_frmt;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            }</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;          }</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;          result_frmt.I = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a> + oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a>;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;          result_frmt.F = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> - oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a>;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;          result_frmt.S = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a>;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;          result_frmt.E =</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;              result_frmt.size - result_frmt.S - result_frmt.I -</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;              result_frmt.F;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;      </div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;          <span class="keyword">struct </span><a class="code" href="struct_s_i_f.html">SIF</a> temp_frmt = <a class="code" href="fxopt__plugin_8h.html#a0739ea1a33332a459046379d8ae20144">new_range_div</a>(oprnd_frmt, result_frmt);</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;          <a class="code" href="fxopt__affine_8c.html#aaa3848f108434439b2d91a86bda052d3">delete_aa_list</a>(&amp;(result_frmt.aa));</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;          result_frmt = temp_frmt; <span class="comment">// shallow, do not delete temp_frmt.aa</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;          <span class="comment">// Correct the number of true I bits in the result based on the max</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;          <span class="comment">// value of the result</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="fxopt__plugin_8h.html#acc341add54b10c2be1635a2cd6d5d629">pessimistic_format</a>(result_frmt)) {</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;            <span class="keywordtype">int</span> extraI =</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                result_frmt.<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a> + result_frmt.F + result_frmt.E -</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                <a class="code" href="fxopt__plugin_8h.html#a4f66770fbec23123e655088d6f39bad3">ceil_log2_range</a>(result_frmt);</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;            extraI = MIN(result_frmt.I, extraI);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;  %d I bits changed to S bits\n&quot;</span>, extraI);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;            result_frmt.S += extraI;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;            result_frmt.I -= extraI;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;          }                       <span class="comment">// axioms are pessimistic</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;          <span class="comment">// Check if result could be invalid (most negative number)</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;          <span class="comment">// If so, convert an I bit to an S bit for greater range</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="fxopt__plugin_8h.html#a4e1141dd0d204692f822763e485a34f7">max_is_mnn</a>(result_frmt)) {</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            fprintf(stderr,</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                    <span class="stringliteral">&quot;  *** 1 S bit changed to I to prevent MNN *** \n&quot;</span>);</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;            result_frmt.S -= 1;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            result_frmt.I += 1;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;          }</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        } <span class="comment">// op2 is not 2^k</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      }                         <span class="comment">// op2 format is initialized</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    }                           <span class="comment">// op1 format is initialized</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  }                             <span class="comment">// was not converted to a multiplication</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <a class="code" href="fxopt__affine_8c.html#a8ba60d39468371b4a9352e353a938470">fix_aa_bp</a>(result_frmt);</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  <a class="code" href="fxopt__plugin_8h.html#aeb0183ed1543d1954cca0408ee3aa9f1">check_range</a>(result_frmt);</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  <span class="keywordflow">return</span> result_frmt;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;}</div>
<div class="ttc" id="fxopt__affine_8c_html_a6aaff3bb26178b836efd99cf279fbdbf"><div class="ttname"><a href="fxopt__affine_8c.html#a6aaff3bb26178b836efd99cf279fbdbf">shift_aa_list</a></div><div class="ttdeci">struct AA * shift_aa_list(struct SIF op_fmt, int k)</div><div class="ttdoc">Perform a virtual shift on an AA list. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__affine_8c_source.html#l00376">fxopt_affine.c:376</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_acc341add54b10c2be1635a2cd6d5d629"><div class="ttname"><a href="fxopt__plugin_8h.html#acc341add54b10c2be1635a2cd6d5d629">pessimistic_format</a></div><div class="ttdeci">int pessimistic_format(struct SIF op_fmt)</div><div class="ttdoc">Check a SIF format for excess integer bits. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__range_8c_source.html#l00546">fxopt_range.c:546</a></div></div>
<div class="ttc" id="struct_s_i_f_html_acba84ce8e1e8ae332cd07112a63be032"><div class="ttname"><a href="struct_s_i_f.html#acba84ce8e1e8ae332cd07112a63be032">SIF::aa</a></div><div class="ttdeci">struct AA * aa</div><div class="ttdoc">Pointer to affine variable list. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00137">fxopt_plugin.h:137</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a1318bc4e5913f72d1808d4e426ef85eb"><div class="ttname"><a href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">SIF::I</a></div><div class="ttdeci">int I</div><div class="ttdoc">number of integer bits in variable </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00123">fxopt_plugin.h:123</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_aeae9f1259640b21f702df96e9b56d2a1"><div class="ttname"><a href="fxopt__plugin_8h.html#aeae9f1259640b21f702df96e9b56d2a1">invert_constant_operand</a></div><div class="ttdeci">void invert_constant_operand(gimple stmt, int opnumber)</div><div class="ttdoc">Replace a constant operand with its reciprocal. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l00889">fxopt_utils.c:889</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a8b43bafee90b30676faae508c21cb8d7"><div class="ttname"><a href="fxopt__plugin_8h.html#a8b43bafee90b30676faae508c21cb8d7">PRINT</a></div><div class="ttdeci">#define PRINT</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00036">fxopt_plugin.h:36</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a9b5d27017c06b4e45f37c06d9b819181"><div class="ttname"><a href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">SIF::F</a></div><div class="ttdeci">int F</div><div class="ttdoc">number of fraction bits in variable </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00124">fxopt_plugin.h:124</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a58394f7a00b0b88fdee315fcd5ed25a1"><div class="ttname"><a href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">SIF::S</a></div><div class="ttdeci">int S</div><div class="ttdoc">number of sign bits in variable </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00122">fxopt_plugin.h:122</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a876c8b44be0037b8595d6cca4e4da2f6"><div class="ttname"><a href="fxopt__plugin_8h.html#a876c8b44be0037b8595d6cca4e4da2f6">print_gimple_stmt</a></div><div class="ttdeci">void print_gimple_stmt(FILE *, gimple, int, int)</div></div>
<div class="ttc" id="fxopt__plugin_8c_html_aa4db879108a0bab1bc4906f569622202"><div class="ttname"><a href="fxopt__plugin_8c.html#aa4db879108a0bab1bc4906f569622202">CONST_DIV_TO_MULT</a></div><div class="ttdeci">int CONST_DIV_TO_MULT</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8c_source.html#l00056">fxopt_plugin.c:56</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a4b66534dd81780e018fd238b11bad1b1"><div class="ttname"><a href="fxopt__plugin_8h.html#a4b66534dd81780e018fd238b11bad1b1">log2_range</a></div><div class="ttdeci">int log2_range(struct SIF op_fmt)</div><div class="ttdoc">Checks for a constant value range that is a power of 2. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__range_8c_source.html#l00143">fxopt_range.c:143</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a584bf30db787408850e826a9e25d7816"><div class="ttname"><a href="struct_s_i_f.html#a584bf30db787408850e826a9e25d7816">SIF::min</a></div><div class="ttdeci">double_int min</div><div class="ttdoc">Minimum possible value. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00136">fxopt_plugin.h:136</a></div></div>
<div class="ttc" id="fxopt__affine_8c_html_a8ba60d39468371b4a9352e353a938470"><div class="ttname"><a href="fxopt__affine_8c.html#a8ba60d39468371b4a9352e353a938470">fix_aa_bp</a></div><div class="ttdeci">void fix_aa_bp(struct SIF op_fmt)</div><div class="ttdoc">Force the AA binary point to be consistent with format. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__affine_8c_source.html#l00452">fxopt_affine.c:452</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_ae33fc19a65b5cae0c06120a3a3037ad7"><div class="ttname"><a href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a></div><div class="ttdeci">void shift_right(struct SIF oprnd_frmt[], tree oprnd_tree[], int opnumber, int count)</div><div class="ttdoc">Perform a right shift on an SIF format. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l01651">fxopt_utils.c:1651</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a838f4d620efd0776323bbe5af19c60c2"><div class="ttname"><a href="fxopt__plugin_8h.html#a838f4d620efd0776323bbe5af19c60c2">get_operand_format</a></div><div class="ttdeci">struct SIF get_operand_format(gimple stmt, int op_number, int element_number, bool print)</div><div class="ttdoc">Determine the SIF format of a statement operand. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l01152">fxopt_utils.c:1152</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a564d283d3bb41651e593c62e2f46d079"><div class="ttname"><a href="struct_s_i_f.html#a564d283d3bb41651e593c62e2f46d079">SIF::max</a></div><div class="ttdeci">double_int max</div><div class="ttdoc">Maximum possible value. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00135">fxopt_plugin.h:135</a></div></div>
<div class="ttc" id="fxopt__affine_8c_html_aaa3848f108434439b2d91a86bda052d3"><div class="ttname"><a href="fxopt__affine_8c.html#aaa3848f108434439b2d91a86bda052d3">delete_aa_list</a></div><div class="ttdeci">void delete_aa_list(struct AA **aa_list_pp)</div><div class="ttdoc">Delete an entire AA definition. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__affine_8c_source.html#l00251">fxopt_affine.c:251</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a9dbaabd34c9e88d0bc5550cdea19494c"><div class="ttname"><a href="fxopt__plugin_8h.html#a9dbaabd34c9e88d0bc5550cdea19494c">format_initialized</a></div><div class="ttdeci">int format_initialized(struct SIF oprnd_frmt)</div><div class="ttdoc">Predicate for an initialized format specification. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l01738">fxopt_utils.c:1738</a></div></div>
<div class="ttc" id="fxopt__stmts_8c_html_abee316a4cfbde39a6337009ee53eda6a"><div class="ttname"><a href="fxopt__stmts_8c.html#abee316a4cfbde39a6337009ee53eda6a">multiplication</a></div><div class="ttdeci">struct SIF multiplication(gimple_stmt_iterator *gsi_p, struct SIF oprnd_frmt[], tree oprnd_tree[])</div><div class="ttdoc">Process multiplication statements. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__stmts_8c_source.html#l00565">fxopt_stmts.c:565</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a4e1141dd0d204692f822763e485a34f7"><div class="ttname"><a href="fxopt__plugin_8h.html#a4e1141dd0d204692f822763e485a34f7">max_is_mnn</a></div><div class="ttdeci">int max_is_mnn(struct SIF op_fmt)</div><div class="ttdoc">Check the range max for most negative number, 0x8000... </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__range_8c_source.html#l00568">fxopt_range.c:568</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a4f66770fbec23123e655088d6f39bad3"><div class="ttname"><a href="fxopt__plugin_8h.html#a4f66770fbec23123e655088d6f39bad3">ceil_log2_range</a></div><div class="ttdeci">int ceil_log2_range(struct SIF op_fmt)</div><div class="ttdoc">Calculate the ceiling of the binary log of the range. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__range_8c_source.html#l00109">fxopt_range.c:109</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a464166f19006c30663e2465d606c8a07"><div class="ttname"><a href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">SIF::size</a></div><div class="ttdeci">int size</div><div class="ttdoc">size of this variable, in bits </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00127">fxopt_plugin.h:127</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_ad4272f8a72e6c14ebd672bf1766e24af"><div class="ttname"><a href="fxopt__plugin_8h.html#ad4272f8a72e6c14ebd672bf1766e24af">shift_left</a></div><div class="ttdeci">void shift_left(struct SIF oprnd_frmt[], tree oprnd_tree[], int opnumber, int count)</div><div class="ttdoc">Shift an SIF format left. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l01684">fxopt_utils.c:1684</a></div></div>
<div class="ttc" id="struct_s_i_f_html"><div class="ttname"><a href="struct_s_i_f.html">SIF</a></div><div class="ttdoc">The structure for the SIF definition of a variable. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00115">fxopt_plugin.h:115</a></div></div>
<div class="ttc" id="struct_s_i_f_html_afd01784fd231aef78ec423aa509f2715"><div class="ttname"><a href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">SIF::E</a></div><div class="ttdeci">int E</div><div class="ttdoc">number of empty bits to the right of F bits </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00125">fxopt_plugin.h:125</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a0739ea1a33332a459046379d8ae20144"><div class="ttname"><a href="fxopt__plugin_8h.html#a0739ea1a33332a459046379d8ae20144">new_range_div</a></div><div class="ttdeci">struct SIF new_range_div(struct SIF oprnd_frmt[], struct SIF result_frmt)</div><div class="ttdoc">Determine the range for the result of division. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__range_8c_source.html#l00727">fxopt_range.c:727</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a23d0132158a81b4458e2a3f455796d19"><div class="ttname"><a href="struct_s_i_f.html#a23d0132158a81b4458e2a3f455796d19">SIF::shift</a></div><div class="ttdeci">int shift</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00128">fxopt_plugin.h:128</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_aeb0183ed1543d1954cca0408ee3aa9f1"><div class="ttname"><a href="fxopt__plugin_8h.html#aeb0183ed1543d1954cca0408ee3aa9f1">check_range</a></div><div class="ttdeci">void check_range(struct SIF op_fmt)</div><div class="ttdoc">Check for valid range. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__range_8c_source.html#l00287">fxopt_range.c:287</a></div></div>
<div class="ttc" id="fxopt__plugin_8c_html_a56edbda4dd15509d5347fa917ea5b9ed"><div class="ttname"><a href="fxopt__plugin_8c.html#a56edbda4dd15509d5347fa917ea5b9ed">lastpass</a></div><div class="ttdeci">int lastpass</div><div class="ttdoc">Set to true when all formats are resolved and code can be generated. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8c_source.html#l00039">fxopt_plugin.c:39</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_ace046b3f15f31d2cdb41c1126fd00517"><div class="ttname"><a href="fxopt__plugin_8h.html#ace046b3f15f31d2cdb41c1126fd00517">error</a></div><div class="ttdeci">void error(const char *,...)</div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a53dad240a1a2da4b6fbbb93f95fe190e"><div class="ttname"><a href="fxopt__plugin_8h.html#a53dad240a1a2da4b6fbbb93f95fe190e">initialize_format</a></div><div class="ttdeci">void initialize_format(struct SIF *op_fmt)</div><div class="ttdoc">Initialize the SIF definition for a variable. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l00219">fxopt_utils.c:219</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abee316a4cfbde39a6337009ee53eda6a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="struct_s_i_f.html">SIF</a> multiplication </td>
          <td>(</td>
          <td class="paramtype">gimple_stmt_iterator *&#160;</td>
          <td class="paramname"><em>gsi_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="struct_s_i_f.html">SIF</a>&#160;</td>
          <td class="paramname"><em>oprnd_frmt</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tree&#160;</td>
          <td class="paramname"><em>oprnd_tree</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process multiplication statements. </p>
<p>For multiplication...</p>
<p>Examples of GIMPLE statements processed by this function: </p>
<div class="fragment"><div class="line">D.1977_4 = D.1976_3 * 2.44140625e-4;</div>
<div class="line">D.1978_5 = c2_1 * InVal_4(D);</div>
<div class="line">D.2022_75 = D.2021_74 * x0_38;</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">gsi_p</td><td>statement iterator, points to statement being processed </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">oprnd_frmt</td><td>array of <a class="el" href="struct_s_i_f.html" title="The structure for the SIF definition of a variable. ">SIF</a> format structs for all operands </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">oprnd_tree</td><td>array of gcc trees for the operands </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="struct_s_i_f.html" title="The structure for the SIF definition of a variable. ">SIF</a> format struct for the result </dd></dl>
<p>Special case of operand is a constant == 2^K: Will cause a "virtual shift" of other RHS operand, moving binary point K bits to the right (K &gt; 0) or left (K &lt; 0).</p>
<p>If either operand is less than 1 (no I bits) and there are X known sign bits to the right of the binary point, then X integer bits in the result will actually be redundant sign bits. But X can't be greater than the number of integer bits in the other operand.</p>
<p>If the double precision multiply is enabled, double the operand sizes for the multiplication (unless the operands are so small that the result will fit in current size). This will cause the rhs operands to be cast to the wider type but there is no need to do any shifts to the operands.</p>
<p>Don't do a double-precision multiply if it provides no benefit (if the number of info bits in the product will fit in a single precision result). Note that the # of info bits in the operand formats may be larger than necessary if an operand has an fxfrmt attribute.</p>
<p>If there are so many integer bits that the product can't possibly fit in the LHS, we're hosed...can't even do double precision because we can't cast the result back to single</p>

<p>Definition at line <a class="el" href="fxopt__stmts_8c_source.html#l00565">565</a> of file <a class="el" href="fxopt__stmts_8c_source.html">fxopt_stmts.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;{</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  gimple stmt, new_stmt;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_s_i_f.html">SIF</a> result_frmt;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <a class="code" href="fxopt__plugin_8h.html#a53dad240a1a2da4b6fbbb93f95fe190e">initialize_format</a>(&amp;result_frmt);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  stmt = gsi_stmt(*gsi_p);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  oprnd_frmt[1] = <a class="code" href="fxopt__plugin_8h.html#a838f4d620efd0776323bbe5af19c60c2">get_operand_format</a>(stmt, 1, 0, <a class="code" href="fxopt__plugin_8h.html#a8b43bafee90b30676faae508c21cb8d7">PRINT</a>);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="fxopt__plugin_8h.html#a9dbaabd34c9e88d0bc5550cdea19494c">format_initialized</a>(oprnd_frmt[1])) {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="comment">// If oprnd_frmt[2] is already initialized then this function was called</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="comment">// from the division function, after inverting a constant divisor</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="fxopt__plugin_8h.html#a9dbaabd34c9e88d0bc5550cdea19494c">format_initialized</a>(oprnd_frmt[2]))</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      oprnd_frmt[2] = <a class="code" href="fxopt__plugin_8h.html#a838f4d620efd0776323bbe5af19c60c2">get_operand_format</a>(stmt, 2, 0, <a class="code" href="fxopt__plugin_8h.html#a8b43bafee90b30676faae508c21cb8d7">PRINT</a>);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="fxopt__plugin_8h.html#a9dbaabd34c9e88d0bc5550cdea19494c">format_initialized</a>(oprnd_frmt[2])) {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      <span class="comment">// Both operands are initialized...here we go</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      result_frmt = oprnd_frmt[0];</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      result_frmt.<a class="code" href="struct_s_i_f.html#acba84ce8e1e8ae332cd07112a63be032">aa</a> = NULL;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <span class="comment">// If log2_range returns -1 then operand is not 2^K</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <span class="comment">// This k value is for the double_int stored for the constant and</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <span class="comment">// therefore must be non-negative</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      <span class="keywordtype">int</span> k = <a class="code" href="fxopt__plugin_8h.html#a4b66534dd81780e018fd238b11bad1b1">log2_range</a>(oprnd_frmt[2]);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      <span class="keywordflow">if</span> (k &gt;= 0) {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="comment">// </span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="comment">// If the constant has a format with no integer bits then it must</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <span class="comment">// have been converted from a real fraction, so the effective K</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="comment">// is negative. The virtual shift will remove integer bits, so</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <span class="comment">// make sure the other operand has enough of them</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="comment">// </span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        <span class="keywordflow">if</span> ((oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a> == 0) &amp;&amp; (oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> != 0)) {</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;          k = k - oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> - oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">E</a>;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;          <span class="keywordflow">if</span> ((k + oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a>) &lt; 0)</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            <a class="code" href="fxopt__plugin_8h.html#ace046b3f15f31d2cdb41c1126fd00517">error</a>(<span class="stringliteral">&quot;fxopt: multiply by 2^(-K), K too big&quot;</span>);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <span class="keywordflow">if</span> (k &gt; (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> + oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">E</a>))</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;          <a class="code" href="fxopt__plugin_8h.html#ace046b3f15f31d2cdb41c1126fd00517">error</a>(<span class="stringliteral">&quot;fxopt: multiply by 2^K, K too big&quot;</span>);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;  virtual shift, binary point moved %d bits\n&quot;</span>, k);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="fxopt__plugin_8c.html#a56edbda4dd15509d5347fa917ea5b9ed">lastpass</a>) {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;          <span class="keywordflow">if</span> (tree_int_cst_sign_bit(oprnd_tree[2])) {</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            <span class="comment">// constant is -2^k, must negate </span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            new_stmt =</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                gimple_build_assign_with_ops(NEGATE_EXPR,</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                                             oprnd_tree[0], oprnd_tree[1],</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                                             NULL);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            new_stmt =</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                gimple_build_assign_with_ops(NOP_EXPR, oprnd_tree[0],</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                                             oprnd_tree[1], NULL);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;          }</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;          <span class="comment">//gimple_set_visited(new_stmt, true);</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;          <a class="code" href="fxopt__plugin_8h.html#a876c8b44be0037b8595d6cca4e4da2f6">print_gimple_stmt</a>(stderr, new_stmt, 2, 0);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;          gsi_replace(gsi_p, new_stmt, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;          oprnd_tree[2] = NULL;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        }</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        result_frmt.I = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a> + k;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <span class="keywordflow">if</span> (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> &gt;= k) {</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;          result_frmt.F = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> - k;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;          result_frmt.E = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">E</a>;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;          result_frmt.F = 0;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;          result_frmt.E = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">E</a> - k;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        <a class="code" href="fxopt__affine_8c.html#aaa3848f108434439b2d91a86bda052d3">delete_aa_list</a>(&amp;(result_frmt.aa));</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        result_frmt.aa = <a class="code" href="fxopt__affine_8c.html#a6aaff3bb26178b836efd99cf279fbdbf">shift_aa_list</a>(oprnd_frmt[1], k);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        result_frmt.S = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a>;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        result_frmt.max = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a564d283d3bb41651e593c62e2f46d079">max</a>;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        result_frmt.min = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a584bf30db787408850e826a9e25d7816">min</a>;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        result_frmt.shift = 0;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="keywordtype">int</span> fraction_zeros = 0;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <span class="keywordflow">if</span> ((oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a> &gt; 0) &amp;&amp; (oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a> == 0)) {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;          fraction_zeros =</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;              oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> + oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">E</a> -</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;              <a class="code" href="fxopt__plugin_8h.html#a4f66770fbec23123e655088d6f39bad3">ceil_log2_range</a>(oprnd_frmt[2]);</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;          fraction_zeros = MIN(fraction_zeros, oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a>);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        }</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        <span class="keywordflow">if</span> ((oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a> &gt; 0) &amp;&amp; (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a> == 0)) {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;          fraction_zeros =</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;              oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> + oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">E</a> -</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;              <a class="code" href="fxopt__plugin_8h.html#a4f66770fbec23123e655088d6f39bad3">ceil_log2_range</a>(oprnd_frmt[1]);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;          fraction_zeros = MIN(fraction_zeros, oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a>);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        }</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="keywordflow">if</span> (fraction_zeros) {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;          fprintf(stderr,</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                  <span class="stringliteral">&quot;  *** Zeros right of b.p., %d I bits changed to S bits in RSLT\n&quot;</span>,</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                  fraction_zeros);</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        }</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="keywordtype">int</span> result_info_bits =</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            result_frmt.size - result_frmt.sgnd + fraction_zeros;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="keywordtype">int</span> oprnds_info_bits = <a class="code" href="fxopt__plugin_8c.html#a6169458d9870790151f886393126ff99">INFO_BITS</a>(1) + <a class="code" href="fxopt__plugin_8c.html#a6169458d9870790151f886393126ff99">INFO_BITS</a>(2);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        <span class="keyword">struct </span><a class="code" href="struct_s_i_f.html">SIF</a> tmp_fmt = <a class="code" href="fxopt__plugin_8h.html#ae763106d4e958410f187fea59b19cbba">new_range_mul</a>(oprnd_frmt, result_frmt);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        <span class="keywordtype">int</span> new_frmt_info_bits = <a class="code" href="fxopt__plugin_8h.html#a4f66770fbec23123e655088d6f39bad3">ceil_log2_range</a>(tmp_fmt);</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <a class="code" href="fxopt__affine_8c.html#aaa3848f108434439b2d91a86bda052d3">delete_aa_list</a>(&amp;(tmp_fmt.<a class="code" href="struct_s_i_f.html#acba84ce8e1e8ae332cd07112a63be032">aa</a>));</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="fxopt__plugin_8c.html#a30c53ae66611406d961d7ad77161aaa0">DBL_PRECISION_MULTS</a>) {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;          <span class="keywordflow">if</span> ((!<a class="code" href="fxopt__plugin_8c.html#a52d471e21d3a5fabd54250b3b79e618f">INTERVAL</a> &amp;&amp; (oprnds_info_bits &gt; result_info_bits))</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;              || (<a class="code" href="fxopt__plugin_8c.html#a52d471e21d3a5fabd54250b3b79e618f">INTERVAL</a> &amp;&amp; (new_frmt_info_bits &gt; result_info_bits))) {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            result_frmt.size = 2 * oprnd_frmt[0].<a class="code" href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">size</a>;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            result_info_bits =</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                result_frmt.size - result_frmt.sgnd + fraction_zeros;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a> += oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">size</a>;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">size</a> = 2 * oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">size</a>;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a> += oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">size</a>;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;            oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">size</a> = 2 * oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">size</a>;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            <span class="comment">// Do implicit cast of RHS to double size of LHS</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="fxopt__plugin_8c.html#a56edbda4dd15509d5347fa917ea5b9ed">lastpass</a>)</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;              gimple_assign_set_rhs_code(gsi_stmt(*gsi_p), WIDEN_MULT_EXPR);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            fprintf(stderr,</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                    <span class="stringliteral">&quot;  *** Double-precision multiply unnecessary ***\n&quot;</span>);</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;          }</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;          <span class="keywordflow">if</span> ((oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a> + oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a>) &gt; result_info_bits) {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            <a class="code" href="fxopt__plugin_8h.html#ace046b3f15f31d2cdb41c1126fd00517">error</a>(<span class="stringliteral">&quot;fxopt: Multiplication impossible, too many I bits&quot;</span>);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;          }</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;          <span class="comment">// </span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;          <span class="comment">// If product won&#39;t fit in LHS, we have to discard bits. Sacrifice</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;          <span class="comment">// one fraction bit at a time from each operand until it fits or we</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;          <span class="comment">// run out of fraction bits</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;          <span class="comment">// </span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;          <span class="keywordflow">while</span> (((<a class="code" href="fxopt__plugin_8c.html#a6169458d9870790151f886393126ff99">INFO_BITS</a>(1) + <a class="code" href="fxopt__plugin_8c.html#a6169458d9870790151f886393126ff99">INFO_BITS</a>(2)) &gt; result_info_bits)</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                 &amp;&amp; (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> &gt; 0 || oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> &gt; 0)) {</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            <span class="comment">// op1 has more information bits</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="fxopt__plugin_8c.html#a6169458d9870790151f886393126ff99">INFO_BITS</a>(1) &gt; <a class="code" href="fxopt__plugin_8c.html#a6169458d9870790151f886393126ff99">INFO_BITS</a>(2)) {</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;              <span class="keywordflow">if</span> (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> &gt; 0) {</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                <a class="code" href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a>(oprnd_frmt, oprnd_tree, 1, 1);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;              } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> &gt; 0) { <span class="comment">// no choice!</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                <a class="code" href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a>(oprnd_frmt, oprnd_tree, 2, 1);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;              }</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;            }</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            <span class="comment">// op2 has more or same information bits</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;              <span class="keywordflow">if</span> (oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> &gt; 0) {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                <a class="code" href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a>(oprnd_frmt, oprnd_tree, 2, 1);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;              } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> &gt; 0) { <span class="comment">// no choice!</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                <a class="code" href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a>(oprnd_frmt, oprnd_tree, 1, 1);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;              }</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            }</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;          }                     <span class="comment">// while too many info bits</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;          <span class="keywordflow">if</span> ((<a class="code" href="fxopt__plugin_8c.html#a6169458d9870790151f886393126ff99">INFO_BITS</a>(1) + <a class="code" href="fxopt__plugin_8c.html#a6169458d9870790151f886393126ff99">INFO_BITS</a>(2)) &lt; result_info_bits) {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            <span class="comment">// Sometimes we get an unexpected empty bit when shifting</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;            <span class="comment">// a constant right. Give back an info bit.</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;  *** Overoptimized, &quot;</span>);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="fxopt__plugin_8c.html#a6169458d9870790151f886393126ff99">INFO_BITS</a>(1) &lt; <a class="code" href="fxopt__plugin_8c.html#a6169458d9870790151f886393126ff99">INFO_BITS</a>(2)) &amp;&amp; (<a class="code" href="fxopt__plugin_8h.html#a7b9c839fdfafa524acb81103943ef8fc">LOST_F_BITS</a>(1) &gt; 0)) {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;              fprintf(stderr, <span class="stringliteral">&quot;shifting op1 left, info bits\n&quot;</span>);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;              <a class="code" href="fxopt__plugin_8h.html#ad4272f8a72e6c14ebd672bf1766e24af">shift_left</a>(oprnd_frmt, oprnd_tree, 1, 1);</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="fxopt__plugin_8h.html#a7b9c839fdfafa524acb81103943ef8fc">LOST_F_BITS</a>(2) &gt; 0) {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;              fprintf(stderr, <span class="stringliteral">&quot;shifting op2 left\n&quot;</span>);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;              <a class="code" href="fxopt__plugin_8h.html#ad4272f8a72e6c14ebd672bf1766e24af">shift_left</a>(oprnd_frmt, oprnd_tree, 2, 1);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="fxopt__plugin_8h.html#a7b9c839fdfafa524acb81103943ef8fc">LOST_F_BITS</a>(1) &gt; 0) {</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;              fprintf(stderr, <span class="stringliteral">&quot;shifting op1 left\n&quot;</span>);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;              <a class="code" href="fxopt__plugin_8h.html#ad4272f8a72e6c14ebd672bf1766e24af">shift_left</a>(oprnd_frmt, oprnd_tree, 1, 1);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;              fprintf(stderr, <span class="stringliteral">&quot;no lost info bits to return\n&quot;</span>);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            }</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;          }                     <span class="comment">// over optimized</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        }                       <span class="comment">// operands must be shifted</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <span class="comment">// </span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <span class="comment">// Product info bits will fit in result, but we may need to discard</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <span class="comment">// empty bits in the operands (i.e. right justify the operands).</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <span class="comment">// Start with the operand that has more empty bits.</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <span class="comment">// </span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <span class="keywordflow">while</span> (((<a class="code" href="fxopt__plugin_8c.html#a6169458d9870790151f886393126ff99">INFO_BITS</a>(1) + oprnd_frmt[1].E +</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                 <a class="code" href="fxopt__plugin_8c.html#a6169458d9870790151f886393126ff99">INFO_BITS</a>(2) + oprnd_frmt[2].E) &gt; result_info_bits)</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;               &amp;&amp; (oprnd_frmt[1].E &gt; 0 || oprnd_frmt[2].E &gt; 0)) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;          <span class="keywordflow">if</span> (oprnd_frmt[1].E &gt; oprnd_frmt[2].E) {</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            <a class="code" href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a>(oprnd_frmt, oprnd_tree, 1, oprnd_frmt[1].E);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            <a class="code" href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a>(oprnd_frmt, oprnd_tree, 2, oprnd_frmt[2].E);</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;          }</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        }</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <span class="comment">// Check if result could be invalid (most negative number)</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <span class="keywordtype">int</span> result_sign_bits =</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            result_frmt.size -</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a> + oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a> - fraction_zeros) -</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> + oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a>) -</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">E</a> + oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">E</a>);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        tmp_fmt = <a class="code" href="fxopt__plugin_8h.html#ae763106d4e958410f187fea59b19cbba">new_range_mul</a>(oprnd_frmt, result_frmt);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="fxopt__plugin_8c.html#a52d471e21d3a5fabd54250b3b79e618f">INTERVAL</a> &amp;&amp; <a class="code" href="fxopt__plugin_8h.html#a4e1141dd0d204692f822763e485a34f7">max_is_mnn</a>(tmp_fmt))</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            || ((!<a class="code" href="fxopt__plugin_8c.html#a52d471e21d3a5fabd54250b3b79e618f">INTERVAL</a>) &amp;&amp; <a class="code" href="fxopt__plugin_8c.html#af1c2d3bd684953a9ceb6ea396153ae87">ROUNDING</a> &amp;&amp; (result_sign_bits == 1))) {</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;          fprintf(stderr, <span class="stringliteral">&quot;  *** Adding a sign bit to prevent MNN *** \n&quot;</span>);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;          <span class="keywordflow">if</span> ((<a class="code" href="fxopt__plugin_8c.html#a6169458d9870790151f886393126ff99">INFO_BITS</a>(1) &gt; <a class="code" href="fxopt__plugin_8c.html#a6169458d9870790151f886393126ff99">INFO_BITS</a>(2))</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;              &amp;&amp; ((oprnd_frmt[1].F + oprnd_frmt[1].E) &gt; 0))</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            <a class="code" href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a>(oprnd_frmt, oprnd_tree, 1, 1);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((oprnd_frmt[2].F + oprnd_frmt[2].E) &gt; 0)</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;            <a class="code" href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a>(oprnd_frmt, oprnd_tree, 2, 1);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;  *** FAILED to add a sign bit *** \n&quot;</span>);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        }</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        <a class="code" href="fxopt__affine_8c.html#aaa3848f108434439b2d91a86bda052d3">delete_aa_list</a>(&amp;(tmp_fmt.<a class="code" href="struct_s_i_f.html#acba84ce8e1e8ae332cd07112a63be032">aa</a>));</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        <span class="comment">// </span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <span class="comment">// Determine product format.</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <span class="comment">// </span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        result_frmt.I = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a> + oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a> - fraction_zeros;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        result_frmt.F = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> + oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a>;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        result_frmt.E = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">E</a> + oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">E</a>;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        result_frmt.S =</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            result_frmt.size - result_frmt.I - result_frmt.F - result_frmt.E;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        <span class="keywordflow">if</span> (result_frmt.S &lt; result_frmt.sgnd)</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;          <a class="code" href="fxopt__plugin_8h.html#ace046b3f15f31d2cdb41c1126fd00517">error</a>(<span class="stringliteral">&quot;fxopt: Multiplication FAILED, sign bit is lost&quot;</span>);</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        <span class="comment">// This can happen if the product is less than half the full</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <span class="comment">// scale result format range</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        tmp_fmt = <a class="code" href="fxopt__plugin_8h.html#ae763106d4e958410f187fea59b19cbba">new_range_mul</a>(oprnd_frmt, result_frmt);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="fxopt__plugin_8h.html#acc341add54b10c2be1635a2cd6d5d629">pessimistic_format</a>(tmp_fmt) &gt;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;             fraction_zeros) &amp;&amp; (result_frmt.I &gt; 0)) {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;          fprintf(stderr, <span class="stringliteral">&quot;  *** Pessimistic multiplication axiom, &quot;</span>);</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;          <span class="comment">// Try to give back a fraction bit, but if impossible then convert</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;          <span class="comment">// an integer bit to a redundant sign bit</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;          <span class="keywordflow">if</span> ((<a class="code" href="fxopt__plugin_8c.html#a6169458d9870790151f886393126ff99">INFO_BITS</a>(1) &lt; <a class="code" href="fxopt__plugin_8c.html#a6169458d9870790151f886393126ff99">INFO_BITS</a>(2)) &amp;&amp; (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a23d0132158a81b4458e2a3f455796d19">shift</a> &gt; 0)) {</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;shifting op1 left, info bits\n&quot;</span>);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;            <a class="code" href="fxopt__plugin_8h.html#ad4272f8a72e6c14ebd672bf1766e24af">shift_left</a>(oprnd_frmt, oprnd_tree, 1, 1);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;            result_frmt.F += 1;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a23d0132158a81b4458e2a3f455796d19">shift</a> &gt; 0) {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;shifting op2 left\n&quot;</span>);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;            <a class="code" href="fxopt__plugin_8h.html#ad4272f8a72e6c14ebd672bf1766e24af">shift_left</a>(oprnd_frmt, oprnd_tree, 2, 1);</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;            result_frmt.F += 1;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a23d0132158a81b4458e2a3f455796d19">shift</a> &gt; 0) {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;shifting op1 left\n&quot;</span>);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;            <a class="code" href="fxopt__plugin_8h.html#ad4272f8a72e6c14ebd672bf1766e24af">shift_left</a>(oprnd_frmt, oprnd_tree, 1, 1);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            result_frmt.F += 1;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;converting I to S in result\n&quot;</span>);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;            result_frmt.S += 1;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;          }</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;          result_frmt.I -= 1;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        }</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <a class="code" href="fxopt__affine_8c.html#aaa3848f108434439b2d91a86bda052d3">delete_aa_list</a>(&amp;(tmp_fmt.<a class="code" href="struct_s_i_f.html#acba84ce8e1e8ae332cd07112a63be032">aa</a>));</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        tmp_fmt = <a class="code" href="fxopt__plugin_8h.html#ae763106d4e958410f187fea59b19cbba">new_range_mul</a>(oprnd_frmt, result_frmt);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        <a class="code" href="fxopt__affine_8c.html#aaa3848f108434439b2d91a86bda052d3">delete_aa_list</a>(&amp;(result_frmt.aa));</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        result_frmt = tmp_fmt; <span class="comment">// shallow copy, don&#39;t delete tmp_fmt.aa</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        result_frmt.<a class="code" href="struct_s_i_f.html#a23d0132158a81b4458e2a3f455796d19">shift</a> = 0;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      }                         <span class="comment">// not a multiply by 2^K</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    }                           <span class="comment">// op2 format is initialized</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  }                             <span class="comment">// op1 format is initialized</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <a class="code" href="fxopt__affine_8c.html#a8ba60d39468371b4a9352e353a938470">fix_aa_bp</a>(result_frmt);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <a class="code" href="fxopt__plugin_8h.html#aeb0183ed1543d1954cca0408ee3aa9f1">check_range</a>(result_frmt);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="keywordflow">return</span> result_frmt;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;}</div>
<div class="ttc" id="fxopt__plugin_8c_html_a6169458d9870790151f886393126ff99"><div class="ttname"><a href="fxopt__plugin_8c.html#a6169458d9870790151f886393126ff99">INFO_BITS</a></div><div class="ttdeci">#define INFO_BITS(x)</div><div class="ttdoc">Number of bits in format that convey magnitude information. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8c_source.html#l00029">fxopt_plugin.c:29</a></div></div>
<div class="ttc" id="fxopt__affine_8c_html_a6aaff3bb26178b836efd99cf279fbdbf"><div class="ttname"><a href="fxopt__affine_8c.html#a6aaff3bb26178b836efd99cf279fbdbf">shift_aa_list</a></div><div class="ttdeci">struct AA * shift_aa_list(struct SIF op_fmt, int k)</div><div class="ttdoc">Perform a virtual shift on an AA list. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__affine_8c_source.html#l00376">fxopt_affine.c:376</a></div></div>
<div class="ttc" id="fxopt__plugin_8c_html_af1c2d3bd684953a9ceb6ea396153ae87"><div class="ttname"><a href="fxopt__plugin_8c.html#af1c2d3bd684953a9ceb6ea396153ae87">ROUNDING</a></div><div class="ttdeci">int ROUNDING</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8c_source.html#l00053">fxopt_plugin.c:53</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_acc341add54b10c2be1635a2cd6d5d629"><div class="ttname"><a href="fxopt__plugin_8h.html#acc341add54b10c2be1635a2cd6d5d629">pessimistic_format</a></div><div class="ttdeci">int pessimistic_format(struct SIF op_fmt)</div><div class="ttdoc">Check a SIF format for excess integer bits. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__range_8c_source.html#l00546">fxopt_range.c:546</a></div></div>
<div class="ttc" id="struct_s_i_f_html_acba84ce8e1e8ae332cd07112a63be032"><div class="ttname"><a href="struct_s_i_f.html#acba84ce8e1e8ae332cd07112a63be032">SIF::aa</a></div><div class="ttdeci">struct AA * aa</div><div class="ttdoc">Pointer to affine variable list. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00137">fxopt_plugin.h:137</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a1318bc4e5913f72d1808d4e426ef85eb"><div class="ttname"><a href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">SIF::I</a></div><div class="ttdeci">int I</div><div class="ttdoc">number of integer bits in variable </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00123">fxopt_plugin.h:123</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a8b43bafee90b30676faae508c21cb8d7"><div class="ttname"><a href="fxopt__plugin_8h.html#a8b43bafee90b30676faae508c21cb8d7">PRINT</a></div><div class="ttdeci">#define PRINT</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00036">fxopt_plugin.h:36</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a9b5d27017c06b4e45f37c06d9b819181"><div class="ttname"><a href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">SIF::F</a></div><div class="ttdeci">int F</div><div class="ttdoc">number of fraction bits in variable </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00124">fxopt_plugin.h:124</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a58394f7a00b0b88fdee315fcd5ed25a1"><div class="ttname"><a href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">SIF::S</a></div><div class="ttdeci">int S</div><div class="ttdoc">number of sign bits in variable </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00122">fxopt_plugin.h:122</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a876c8b44be0037b8595d6cca4e4da2f6"><div class="ttname"><a href="fxopt__plugin_8h.html#a876c8b44be0037b8595d6cca4e4da2f6">print_gimple_stmt</a></div><div class="ttdeci">void print_gimple_stmt(FILE *, gimple, int, int)</div></div>
<div class="ttc" id="fxopt__plugin_8c_html_a30c53ae66611406d961d7ad77161aaa0"><div class="ttname"><a href="fxopt__plugin_8c.html#a30c53ae66611406d961d7ad77161aaa0">DBL_PRECISION_MULTS</a></div><div class="ttdeci">int DBL_PRECISION_MULTS</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8c_source.html#l00055">fxopt_plugin.c:55</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_ae763106d4e958410f187fea59b19cbba"><div class="ttname"><a href="fxopt__plugin_8h.html#ae763106d4e958410f187fea59b19cbba">new_range_mul</a></div><div class="ttdeci">struct SIF new_range_mul(struct SIF oprnd_frmt[], struct SIF result_frmt)</div><div class="ttdoc">Determine the range for the result of multiplication. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__range_8c_source.html#l00670">fxopt_range.c:670</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a4b66534dd81780e018fd238b11bad1b1"><div class="ttname"><a href="fxopt__plugin_8h.html#a4b66534dd81780e018fd238b11bad1b1">log2_range</a></div><div class="ttdeci">int log2_range(struct SIF op_fmt)</div><div class="ttdoc">Checks for a constant value range that is a power of 2. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__range_8c_source.html#l00143">fxopt_range.c:143</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a584bf30db787408850e826a9e25d7816"><div class="ttname"><a href="struct_s_i_f.html#a584bf30db787408850e826a9e25d7816">SIF::min</a></div><div class="ttdeci">double_int min</div><div class="ttdoc">Minimum possible value. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00136">fxopt_plugin.h:136</a></div></div>
<div class="ttc" id="fxopt__affine_8c_html_a8ba60d39468371b4a9352e353a938470"><div class="ttname"><a href="fxopt__affine_8c.html#a8ba60d39468371b4a9352e353a938470">fix_aa_bp</a></div><div class="ttdeci">void fix_aa_bp(struct SIF op_fmt)</div><div class="ttdoc">Force the AA binary point to be consistent with format. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__affine_8c_source.html#l00452">fxopt_affine.c:452</a></div></div>
<div class="ttc" id="fxopt__plugin_8c_html_a52d471e21d3a5fabd54250b3b79e618f"><div class="ttname"><a href="fxopt__plugin_8c.html#a52d471e21d3a5fabd54250b3b79e618f">INTERVAL</a></div><div class="ttdeci">int INTERVAL</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8c_source.html#l00050">fxopt_plugin.c:50</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_ae33fc19a65b5cae0c06120a3a3037ad7"><div class="ttname"><a href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a></div><div class="ttdeci">void shift_right(struct SIF oprnd_frmt[], tree oprnd_tree[], int opnumber, int count)</div><div class="ttdoc">Perform a right shift on an SIF format. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l01651">fxopt_utils.c:1651</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a838f4d620efd0776323bbe5af19c60c2"><div class="ttname"><a href="fxopt__plugin_8h.html#a838f4d620efd0776323bbe5af19c60c2">get_operand_format</a></div><div class="ttdeci">struct SIF get_operand_format(gimple stmt, int op_number, int element_number, bool print)</div><div class="ttdoc">Determine the SIF format of a statement operand. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l01152">fxopt_utils.c:1152</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a564d283d3bb41651e593c62e2f46d079"><div class="ttname"><a href="struct_s_i_f.html#a564d283d3bb41651e593c62e2f46d079">SIF::max</a></div><div class="ttdeci">double_int max</div><div class="ttdoc">Maximum possible value. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00135">fxopt_plugin.h:135</a></div></div>
<div class="ttc" id="fxopt__affine_8c_html_aaa3848f108434439b2d91a86bda052d3"><div class="ttname"><a href="fxopt__affine_8c.html#aaa3848f108434439b2d91a86bda052d3">delete_aa_list</a></div><div class="ttdeci">void delete_aa_list(struct AA **aa_list_pp)</div><div class="ttdoc">Delete an entire AA definition. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__affine_8c_source.html#l00251">fxopt_affine.c:251</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a9dbaabd34c9e88d0bc5550cdea19494c"><div class="ttname"><a href="fxopt__plugin_8h.html#a9dbaabd34c9e88d0bc5550cdea19494c">format_initialized</a></div><div class="ttdeci">int format_initialized(struct SIF oprnd_frmt)</div><div class="ttdoc">Predicate for an initialized format specification. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l01738">fxopt_utils.c:1738</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a4e1141dd0d204692f822763e485a34f7"><div class="ttname"><a href="fxopt__plugin_8h.html#a4e1141dd0d204692f822763e485a34f7">max_is_mnn</a></div><div class="ttdeci">int max_is_mnn(struct SIF op_fmt)</div><div class="ttdoc">Check the range max for most negative number, 0x8000... </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__range_8c_source.html#l00568">fxopt_range.c:568</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a4f66770fbec23123e655088d6f39bad3"><div class="ttname"><a href="fxopt__plugin_8h.html#a4f66770fbec23123e655088d6f39bad3">ceil_log2_range</a></div><div class="ttdeci">int ceil_log2_range(struct SIF op_fmt)</div><div class="ttdoc">Calculate the ceiling of the binary log of the range. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__range_8c_source.html#l00109">fxopt_range.c:109</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a7b9c839fdfafa524acb81103943ef8fc"><div class="ttname"><a href="fxopt__plugin_8h.html#a7b9c839fdfafa524acb81103943ef8fc">LOST_F_BITS</a></div><div class="ttdeci">#define LOST_F_BITS(x)</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00059">fxopt_plugin.h:59</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a464166f19006c30663e2465d606c8a07"><div class="ttname"><a href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">SIF::size</a></div><div class="ttdeci">int size</div><div class="ttdoc">size of this variable, in bits </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00127">fxopt_plugin.h:127</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_ad4272f8a72e6c14ebd672bf1766e24af"><div class="ttname"><a href="fxopt__plugin_8h.html#ad4272f8a72e6c14ebd672bf1766e24af">shift_left</a></div><div class="ttdeci">void shift_left(struct SIF oprnd_frmt[], tree oprnd_tree[], int opnumber, int count)</div><div class="ttdoc">Shift an SIF format left. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l01684">fxopt_utils.c:1684</a></div></div>
<div class="ttc" id="struct_s_i_f_html"><div class="ttname"><a href="struct_s_i_f.html">SIF</a></div><div class="ttdoc">The structure for the SIF definition of a variable. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00115">fxopt_plugin.h:115</a></div></div>
<div class="ttc" id="struct_s_i_f_html_afd01784fd231aef78ec423aa509f2715"><div class="ttname"><a href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">SIF::E</a></div><div class="ttdeci">int E</div><div class="ttdoc">number of empty bits to the right of F bits </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00125">fxopt_plugin.h:125</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a23d0132158a81b4458e2a3f455796d19"><div class="ttname"><a href="struct_s_i_f.html#a23d0132158a81b4458e2a3f455796d19">SIF::shift</a></div><div class="ttdeci">int shift</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00128">fxopt_plugin.h:128</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_aeb0183ed1543d1954cca0408ee3aa9f1"><div class="ttname"><a href="fxopt__plugin_8h.html#aeb0183ed1543d1954cca0408ee3aa9f1">check_range</a></div><div class="ttdeci">void check_range(struct SIF op_fmt)</div><div class="ttdoc">Check for valid range. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__range_8c_source.html#l00287">fxopt_range.c:287</a></div></div>
<div class="ttc" id="fxopt__plugin_8c_html_a56edbda4dd15509d5347fa917ea5b9ed"><div class="ttname"><a href="fxopt__plugin_8c.html#a56edbda4dd15509d5347fa917ea5b9ed">lastpass</a></div><div class="ttdeci">int lastpass</div><div class="ttdoc">Set to true when all formats are resolved and code can be generated. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8c_source.html#l00039">fxopt_plugin.c:39</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_ace046b3f15f31d2cdb41c1126fd00517"><div class="ttname"><a href="fxopt__plugin_8h.html#ace046b3f15f31d2cdb41c1126fd00517">error</a></div><div class="ttdeci">void error(const char *,...)</div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a53dad240a1a2da4b6fbbb93f95fe190e"><div class="ttname"><a href="fxopt__plugin_8h.html#a53dad240a1a2da4b6fbbb93f95fe190e">initialize_format</a></div><div class="ttdeci">void initialize_format(struct SIF *op_fmt)</div><div class="ttdoc">Initialize the SIF definition for a variable. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l00219">fxopt_utils.c:219</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa6401978bf1be47af8de2998b9a2ded3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="struct_s_i_f.html">SIF</a> nop </td>
          <td>(</td>
          <td class="paramtype">gimple_stmt_iterator *&#160;</td>
          <td class="paramname"><em>gsi_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="struct_s_i_f.html">SIF</a>&#160;</td>
          <td class="paramname"><em>oprnd_frmt</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tree&#160;</td>
          <td class="paramname"><em>oprnd_tree</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process unary assignment statements. </p>
<p>Includes NOP, NEGATE, truncation, casts, variable declarations, and simple assignments from a declared variable to an SSA name. If the size of operand[0] (the LHS) is different from the size of operand[1] (the RHS) then we have a problem...issue a gcc warning. In general, the format of the result is set to be the same as the format of the RHS operand. For memory loads and stores, the pointer is assigned the format of the data that it points to. For NEGATE instructions the minimum value of the result is set to the negative of operand[1]'s maximum, and vice-versa. When storing to memory try to preserve the location of the binary point. If the operands are an entire array, make the same changes to the <a class="el" href="struct_s_i_f.html" title="The structure for the SIF definition of a variable. ">SIF</a> format structs for every element of the array.</p>
<p>Examples of GIMPLE statements processed in this function: </p>
<div class="fragment"><div class="line">s1.11_58 = s1;</div>
<div class="line">accum_20 = (float) D.1992_19;</div>
<div class="line">*D.1985_78[0] = x6_63;</div>
<div class="line">D.2004_53 = -s1.9_52;</div>
<div class="line">*D.2104_204[col_2] = x4_185;</div>
<div class="line">data[0] = InVal_4(D);</div>
</div><!-- fragment --><dl class="section warning"><dt>Warning</dt><dd>Casts from unsigned to signed may be untested</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">gsi_p</td><td>statement iterator, points to statement being processed </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">oprnd_frmt[]</td><td>array of <a class="el" href="struct_s_i_f.html" title="The structure for the SIF definition of a variable. ">SIF</a> format structs for all operands </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">oprnd_tree[]</td><td>array of gcc trees for the operands </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="struct_s_i_f.html" title="The structure for the SIF definition of a variable. ">SIF</a> format struct for the result </dd></dl>

<p>Definition at line <a class="el" href="fxopt__stmts_8c_source.html#l00061">61</a> of file <a class="el" href="fxopt__stmts_8c_source.html">fxopt_stmts.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;{</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keywordtype">bool</span> AA_mode = <a class="code" href="fxopt__plugin_8h.html#a97fe5470fb1ac167c713671655ff3e52">ADD</a>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_s_i_f.html">SIF</a> result_frmt;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <a class="code" href="fxopt__plugin_8h.html#a53dad240a1a2da4b6fbbb93f95fe190e">initialize_format</a>(&amp;result_frmt);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  gimple stmt = gsi_stmt(*gsi_p);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  oprnd_frmt[1] = <a class="code" href="fxopt__plugin_8h.html#a838f4d620efd0776323bbe5af19c60c2">get_operand_format</a>(stmt, 1, 0, <a class="code" href="fxopt__plugin_8h.html#a8b43bafee90b30676faae508c21cb8d7">PRINT</a>);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="keywordflow">if</span> (! <a class="code" href="fxopt__plugin_8h.html#a9dbaabd34c9e88d0bc5550cdea19494c">format_initialized</a>(oprnd_frmt[1]))</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      <span class="keywordflow">return</span> result_frmt;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="comment">// If the RHS is an entire array then the result_frmt is the format</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="comment">// of the first element. Doesn&#39;t matter, since shift is zero nothing</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="comment">// will be done to the elements</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  result_frmt = oprnd_frmt[0];</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  result_frmt.<a class="code" href="struct_s_i_f.html#a23d0132158a81b4458e2a3f455796d19">shift</a> = 0;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  result_frmt.aa = NULL;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">if</span> (oprnd_frmt[0].<a class="code" href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">size</a> == oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">size</a>) {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">if</span> (gimple_assign_cast_p(stmt) ||</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        (oprnd_frmt[0].<a class="code" href="struct_s_i_f.html#a76e1eafe400d8c4a61af7cc6c592b058">sgnd</a> == oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a76e1eafe400d8c4a61af7cc6c592b058">sgnd</a>) ||</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        (oprnd_frmt[0].sgnd &amp;&amp; (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a6930dd703e6e637a2cc7c98031994d28">ptr_op</a> != 0)</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                           &amp;&amp; (oprnd_frmt[0].<a class="code" href="struct_s_i_f.html#a6930dd703e6e637a2cc7c98031994d28">ptr_op</a> == 0)) ||</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        (oprnd_frmt[1].sgnd &amp;&amp; (oprnd_frmt[0].<a class="code" href="struct_s_i_f.html#a6930dd703e6e637a2cc7c98031994d28">ptr_op</a> != 0)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                                             &amp;&amp; (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a6930dd703e6e637a2cc7c98031994d28">ptr_op</a> == 0))) {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <a class="code" href="fxopt__plugin_8h.html#a16e2f15bd22d9f8fa1435bb3111d5b1b">copy_SIF</a>(&amp;oprnd_frmt[1],&amp;result_frmt);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <span class="keywordflow">if</span> (oprnd_frmt[1].sgnd) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="comment">// Cast signed to unsigned</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="comment">// FIXME There be dragons here...just discarding sign bits</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="comment">// shift_left(oprnd_frmt, oprnd_tree, 1, oprnd_frmt[1].S);</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <a class="code" href="fxopt__plugin_8h.html#a5eb3900658a72bad49717c4b86bff166">warning</a>(0, G_(<span class="stringliteral">&quot;fxopt: casting signed to unsigned&quot;</span>));</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="comment">// FIXME update range</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <a class="code" href="fxopt__plugin_8h.html#a5eb3900658a72bad49717c4b86bff166">warning</a>(0, G_(<span class="stringliteral">&quot;fxopt: casting unsigned to signed&quot;</span>));</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a>(oprnd_frmt, oprnd_tree, 1, 1);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="comment">// FIXME update range</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="fxopt__plugin_8h.html#a5eb3900658a72bad49717c4b86bff166">warning</a>(0,</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            G_(<span class="stringliteral">&quot;fxopt: NOP, LHS has %d bits, RHS has %d bits&quot;</span>),</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            oprnd_frmt[0].size, oprnd_frmt[1].size);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordflow">if</span> (NEGATE_EXPR == gimple_assign_rhs_code(stmt)) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    double_int temp = result_frmt.max;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    result_frmt.max = double_int_neg(result_frmt.min);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    result_frmt.min = double_int_neg(temp);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    AA_mode = <a class="code" href="fxopt__plugin_8h.html#a62c52d6d320f53e9e6632cce5a595660">SUB</a>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="comment">// If store to memory, try to do trivial fixes to preserve the pointer</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">//   format but copy the new min/max</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keywordflow">if</span> (oprnd_frmt[0].<a class="code" href="struct_s_i_f.html#a6930dd703e6e637a2cc7c98031994d28">ptr_op</a> &amp;&amp; (!oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a6930dd703e6e637a2cc7c98031994d28">ptr_op</a>)) {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">// Need to move binary point?</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordtype">int</span> bp_diff = (oprnd_frmt[0].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a> + oprnd_frmt[0].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a>) -</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        (result_frmt.S + result_frmt.I);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">if</span> (bp_diff &gt; 0) {          <span class="comment">// move right</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      <a class="code" href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a>(oprnd_frmt, oprnd_tree, 1, bp_diff);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bp_diff &lt; 0) {   <span class="comment">// move left, if extra S bits</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="keywordflow">if</span> ((bp_diff + oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a>) &gt; 0) {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <a class="code" href="fxopt__plugin_8h.html#ad4272f8a72e6c14ebd672bf1766e24af">shift_left</a>(oprnd_frmt, oprnd_tree, 1, bp_diff);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <a class="code" href="fxopt__plugin_8h.html#ace046b3f15f31d2cdb41c1126fd00517">error</a>(<span class="stringliteral">&quot;fxopt: could not preserve pointer format&quot;</span>);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    result_frmt.S = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    result_frmt.I = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a>;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    result_frmt.F = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    result_frmt.E = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">E</a>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    result_frmt.min = <a class="code" href="fxopt__plugin_8h.html#a5a592200e0275bca4d5db1146bd63057">new_min</a>(oprnd_frmt[1]);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    result_frmt.max = <a class="code" href="fxopt__plugin_8h.html#a76efbc1546781f32b4c053a0729d331d">new_max</a>(oprnd_frmt[1]);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  }</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  result_frmt.E =</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      result_frmt.size - result_frmt.S - result_frmt.I - result_frmt.F;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <a class="code" href="fxopt__affine_8c.html#aaa3848f108434439b2d91a86bda052d3">delete_aa_list</a>(&amp;(result_frmt.aa));</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  result_frmt.aa = <a class="code" href="fxopt__affine_8c.html#adef7370a316f4892d31135bb831c4b41">affine_assign</a>(oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#acba84ce8e1e8ae332cd07112a63be032">aa</a>, AA_mode);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="comment">// Deal with the other members of an array</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordflow">if</span> ((TREE_CODE(TREE_TYPE(oprnd_tree[1])) == ARRAY_TYPE) &amp;&amp;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      (gimple_assign_rhs_code(stmt) == VAR_DECL)) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">if</span> (NEGATE_EXPR == gimple_assign_rhs_code(stmt))</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      fprintf(stderr, <span class="stringliteral">&quot;  YIKES, a negated array!\n&quot;</span>);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordtype">int</span> low_bound =</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        TREE_INT_CST_LOW(TYPE_MIN_VALUE</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                         (TYPE_DOMAIN(oprnd_tree[1]-&gt;common.type)));</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordtype">int</span> high_bound =</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        TREE_INT_CST_LOW(TYPE_MAX_VALUE</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                         (TYPE_DOMAIN(oprnd_tree[1]-&gt;common.type)));</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordtype">int</span> elements = high_bound - low_bound + 1;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">// Deal with arrays...create a format for every element</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordtype">int</span> element_size = DECL_SIZE(oprnd_tree[1])</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        ? (TREE_INT_CST_LOW(DECL_SIZE(oprnd_tree[1])) / elements) : 0;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">if</span> (element_size &gt; 0) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <span class="keywordtype">int</span> index;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <span class="keyword">struct </span><a class="code" href="struct_s_i_f.html">SIF</a> *var_fmt, *op_fmt;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <span class="keywordflow">for</span> (index = low_bound; index &lt;= high_bound; index++) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        var_fmt = <a class="code" href="fxopt__plugin_8h.html#a6fa27c9a550736bb1bbd016f4feb2db4">find_var_format</a>(<a class="code" href="fxopt__plugin_8h.html#a2c6cddb4dccafd9e7d1307ea3e1373a6">calc_hash_key</a>(oprnd_tree[1], 0, index));</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        op_fmt = <a class="code" href="fxopt__plugin_8h.html#a6fa27c9a550736bb1bbd016f4feb2db4">find_var_format</a>(<a class="code" href="fxopt__plugin_8h.html#a2c6cddb4dccafd9e7d1307ea3e1373a6">calc_hash_key</a>(oprnd_tree[0], 0, index));</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a> = var_fmt-&gt;<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a> = var_fmt-&gt;<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a> = var_fmt-&gt;<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        op_fmt-&gt;<a class="code" href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">E</a> = op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">size</a> - op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a> - op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a> - op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a584bf30db787408850e826a9e25d7816">min</a> = var_fmt-&gt;<a class="code" href="struct_s_i_f.html#a584bf30db787408850e826a9e25d7816">min</a>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a564d283d3bb41651e593c62e2f46d079">max</a> = var_fmt-&gt;<a class="code" href="struct_s_i_f.html#a564d283d3bb41651e593c62e2f46d079">max</a>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a76e1eafe400d8c4a61af7cc6c592b058">sgnd</a> = var_fmt-&gt;<a class="code" href="struct_s_i_f.html#a76e1eafe400d8c4a61af7cc6c592b058">sgnd</a>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a23d0132158a81b4458e2a3f455796d19">shift</a> = 0;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <a class="code" href="fxopt__affine_8c.html#aaa3848f108434439b2d91a86bda052d3">delete_aa_list</a>(&amp;(op_fmt-&gt;<a class="code" href="struct_s_i_f.html#acba84ce8e1e8ae332cd07112a63be032">aa</a>));</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        op_fmt-&gt;<a class="code" href="struct_s_i_f.html#acba84ce8e1e8ae332cd07112a63be032">aa</a> = <a class="code" href="fxopt__affine_8c.html#a3f2aac7e6cbba545edc4d4545d2322df">copy_aa_list</a>(result_frmt.aa);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;     [%2d]  (%2d/%2d/%2d/%2d)  [%+5.3f,%+5.3f]\n&quot;</span>,</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                index, op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">S</a>, op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">I</a>, op_fmt-&gt;<a class="code" href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">F</a>, op_fmt-&gt;<a class="code" href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">E</a>,</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                <a class="code" href="fxopt__plugin_8h.html#a9aff6a1aa064b1cb988a5f62c7b1a331">real_min</a>(op_fmt), <a class="code" href="fxopt__plugin_8h.html#a22781c7f4b2c2e46cd5d52fe0b64a68f">real_max</a>(op_fmt));</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="keywordflow">return</span> result_frmt;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;}</div>
<div class="ttc" id="fxopt__affine_8c_html_a3f2aac7e6cbba545edc4d4545d2322df"><div class="ttname"><a href="fxopt__affine_8c.html#a3f2aac7e6cbba545edc4d4545d2322df">copy_aa_list</a></div><div class="ttdeci">struct AA * copy_aa_list(struct AA *aa_src_list_p)</div><div class="ttdoc">Copy an AA list. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__affine_8c_source.html#l00303">fxopt_affine.c:303</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a6930dd703e6e637a2cc7c98031994d28"><div class="ttname"><a href="struct_s_i_f.html#a6930dd703e6e637a2cc7c98031994d28">SIF::ptr_op</a></div><div class="ttdeci">int ptr_op</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00130">fxopt_plugin.h:130</a></div></div>
<div class="ttc" id="struct_s_i_f_html_acba84ce8e1e8ae332cd07112a63be032"><div class="ttname"><a href="struct_s_i_f.html#acba84ce8e1e8ae332cd07112a63be032">SIF::aa</a></div><div class="ttdeci">struct AA * aa</div><div class="ttdoc">Pointer to affine variable list. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00137">fxopt_plugin.h:137</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a1318bc4e5913f72d1808d4e426ef85eb"><div class="ttname"><a href="struct_s_i_f.html#a1318bc4e5913f72d1808d4e426ef85eb">SIF::I</a></div><div class="ttdeci">int I</div><div class="ttdoc">number of integer bits in variable </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00123">fxopt_plugin.h:123</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a8b43bafee90b30676faae508c21cb8d7"><div class="ttname"><a href="fxopt__plugin_8h.html#a8b43bafee90b30676faae508c21cb8d7">PRINT</a></div><div class="ttdeci">#define PRINT</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00036">fxopt_plugin.h:36</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a9b5d27017c06b4e45f37c06d9b819181"><div class="ttname"><a href="struct_s_i_f.html#a9b5d27017c06b4e45f37c06d9b819181">SIF::F</a></div><div class="ttdeci">int F</div><div class="ttdoc">number of fraction bits in variable </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00124">fxopt_plugin.h:124</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a58394f7a00b0b88fdee315fcd5ed25a1"><div class="ttname"><a href="struct_s_i_f.html#a58394f7a00b0b88fdee315fcd5ed25a1">SIF::S</a></div><div class="ttdeci">int S</div><div class="ttdoc">number of sign bits in variable </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00122">fxopt_plugin.h:122</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a6fa27c9a550736bb1bbd016f4feb2db4"><div class="ttname"><a href="fxopt__plugin_8h.html#a6fa27c9a550736bb1bbd016f4feb2db4">find_var_format</a></div><div class="ttdeci">struct SIF * find_var_format(int var_id)</div><div class="ttdoc">Find/create a pointer to a SIF, given its hash key. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l00171">fxopt_utils.c:171</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a97fe5470fb1ac167c713671655ff3e52"><div class="ttname"><a href="fxopt__plugin_8h.html#a97fe5470fb1ac167c713671655ff3e52">ADD</a></div><div class="ttdeci">#define ADD</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00039">fxopt_plugin.h:39</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a584bf30db787408850e826a9e25d7816"><div class="ttname"><a href="struct_s_i_f.html#a584bf30db787408850e826a9e25d7816">SIF::min</a></div><div class="ttdeci">double_int min</div><div class="ttdoc">Minimum possible value. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00136">fxopt_plugin.h:136</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a76efbc1546781f32b4c053a0729d331d"><div class="ttname"><a href="fxopt__plugin_8h.html#a76efbc1546781f32b4c053a0729d331d">new_max</a></div><div class="ttdeci">double_int new_max(struct SIF op_fmt)</div><div class="ttdoc">Calculate range max after shift. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__range_8c_source.html#l00173">fxopt_range.c:173</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_ae33fc19a65b5cae0c06120a3a3037ad7"><div class="ttname"><a href="fxopt__plugin_8h.html#ae33fc19a65b5cae0c06120a3a3037ad7">shift_right</a></div><div class="ttdeci">void shift_right(struct SIF oprnd_frmt[], tree oprnd_tree[], int opnumber, int count)</div><div class="ttdoc">Perform a right shift on an SIF format. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l01651">fxopt_utils.c:1651</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a838f4d620efd0776323bbe5af19c60c2"><div class="ttname"><a href="fxopt__plugin_8h.html#a838f4d620efd0776323bbe5af19c60c2">get_operand_format</a></div><div class="ttdeci">struct SIF get_operand_format(gimple stmt, int op_number, int element_number, bool print)</div><div class="ttdoc">Determine the SIF format of a statement operand. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l01152">fxopt_utils.c:1152</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a564d283d3bb41651e593c62e2f46d079"><div class="ttname"><a href="struct_s_i_f.html#a564d283d3bb41651e593c62e2f46d079">SIF::max</a></div><div class="ttdeci">double_int max</div><div class="ttdoc">Maximum possible value. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00135">fxopt_plugin.h:135</a></div></div>
<div class="ttc" id="fxopt__affine_8c_html_aaa3848f108434439b2d91a86bda052d3"><div class="ttname"><a href="fxopt__affine_8c.html#aaa3848f108434439b2d91a86bda052d3">delete_aa_list</a></div><div class="ttdeci">void delete_aa_list(struct AA **aa_list_pp)</div><div class="ttdoc">Delete an entire AA definition. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__affine_8c_source.html#l00251">fxopt_affine.c:251</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a76e1eafe400d8c4a61af7cc6c592b058"><div class="ttname"><a href="struct_s_i_f.html#a76e1eafe400d8c4a61af7cc6c592b058">SIF::sgnd</a></div><div class="ttdeci">int sgnd</div><div class="ttdoc">1 if signed, 0 if unsigned </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00132">fxopt_plugin.h:132</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a16e2f15bd22d9f8fa1435bb3111d5b1b"><div class="ttname"><a href="fxopt__plugin_8h.html#a16e2f15bd22d9f8fa1435bb3111d5b1b">copy_SIF</a></div><div class="ttdeci">void copy_SIF(struct SIF *src, struct SIF *dest)</div><div class="ttdoc">Copy the SIF format of one variable to another. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l00279">fxopt_utils.c:279</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a9dbaabd34c9e88d0bc5550cdea19494c"><div class="ttname"><a href="fxopt__plugin_8h.html#a9dbaabd34c9e88d0bc5550cdea19494c">format_initialized</a></div><div class="ttdeci">int format_initialized(struct SIF oprnd_frmt)</div><div class="ttdoc">Predicate for an initialized format specification. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l01738">fxopt_utils.c:1738</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a5a592200e0275bca4d5db1146bd63057"><div class="ttname"><a href="fxopt__plugin_8h.html#a5a592200e0275bca4d5db1146bd63057">new_min</a></div><div class="ttdeci">double_int new_min(struct SIF op_fmt)</div><div class="ttdoc">Calculate range min after shift. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__range_8c_source.html#l00220">fxopt_range.c:220</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a22781c7f4b2c2e46cd5d52fe0b64a68f"><div class="ttname"><a href="fxopt__plugin_8h.html#a22781c7f4b2c2e46cd5d52fe0b64a68f">real_max</a></div><div class="ttdeci">float real_max(struct SIF *op_fmt)</div><div class="ttdoc">Return range maximum as a floating-point value. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l00304">fxopt_utils.c:304</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a464166f19006c30663e2465d606c8a07"><div class="ttname"><a href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">SIF::size</a></div><div class="ttdeci">int size</div><div class="ttdoc">size of this variable, in bits </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00127">fxopt_plugin.h:127</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a62c52d6d320f53e9e6632cce5a595660"><div class="ttname"><a href="fxopt__plugin_8h.html#a62c52d6d320f53e9e6632cce5a595660">SUB</a></div><div class="ttdeci">#define SUB</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00040">fxopt_plugin.h:40</a></div></div>
<div class="ttc" id="fxopt__affine_8c_html_adef7370a316f4892d31135bb831c4b41"><div class="ttname"><a href="fxopt__affine_8c.html#adef7370a316f4892d31135bb831c4b41">affine_assign</a></div><div class="ttdeci">struct AA * affine_assign(struct AA *aa_src_list_p, bool add)</div><div class="ttdoc">Determine affine result of a simple assignment statement. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__affine_8c_source.html#l00335">fxopt_affine.c:335</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_ad4272f8a72e6c14ebd672bf1766e24af"><div class="ttname"><a href="fxopt__plugin_8h.html#ad4272f8a72e6c14ebd672bf1766e24af">shift_left</a></div><div class="ttdeci">void shift_left(struct SIF oprnd_frmt[], tree oprnd_tree[], int opnumber, int count)</div><div class="ttdoc">Shift an SIF format left. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l01684">fxopt_utils.c:1684</a></div></div>
<div class="ttc" id="struct_s_i_f_html"><div class="ttname"><a href="struct_s_i_f.html">SIF</a></div><div class="ttdoc">The structure for the SIF definition of a variable. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00115">fxopt_plugin.h:115</a></div></div>
<div class="ttc" id="struct_s_i_f_html_afd01784fd231aef78ec423aa509f2715"><div class="ttname"><a href="struct_s_i_f.html#afd01784fd231aef78ec423aa509f2715">SIF::E</a></div><div class="ttdeci">int E</div><div class="ttdoc">number of empty bits to the right of F bits </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00125">fxopt_plugin.h:125</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a2c6cddb4dccafd9e7d1307ea3e1373a6"><div class="ttname"><a href="fxopt__plugin_8h.html#a2c6cddb4dccafd9e7d1307ea3e1373a6">calc_hash_key</a></div><div class="ttdeci">int calc_hash_key(tree var_tree, int version, int index)</div><div class="ttdoc">Calculate the hash key for the SIF formats. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l00068">fxopt_utils.c:68</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a9aff6a1aa064b1cb988a5f62c7b1a331"><div class="ttname"><a href="fxopt__plugin_8h.html#a9aff6a1aa064b1cb988a5f62c7b1a331">real_min</a></div><div class="ttdeci">float real_min(struct SIF *op_fmt)</div><div class="ttdoc">Return range minimum as a floating-point value. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l00316">fxopt_utils.c:316</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a5eb3900658a72bad49717c4b86bff166"><div class="ttname"><a href="fxopt__plugin_8h.html#a5eb3900658a72bad49717c4b86bff166">warning</a></div><div class="ttdeci">bool warning(int, const char *,...)</div></div>
<div class="ttc" id="struct_s_i_f_html_a23d0132158a81b4458e2a3f455796d19"><div class="ttname"><a href="struct_s_i_f.html#a23d0132158a81b4458e2a3f455796d19">SIF::shift</a></div><div class="ttdeci">int shift</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00128">fxopt_plugin.h:128</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_ace046b3f15f31d2cdb41c1126fd00517"><div class="ttname"><a href="fxopt__plugin_8h.html#ace046b3f15f31d2cdb41c1126fd00517">error</a></div><div class="ttdeci">void error(const char *,...)</div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a53dad240a1a2da4b6fbbb93f95fe190e"><div class="ttname"><a href="fxopt__plugin_8h.html#a53dad240a1a2da4b6fbbb93f95fe190e">initialize_format</a></div><div class="ttdeci">void initialize_format(struct SIF *op_fmt)</div><div class="ttdoc">Initialize the SIF definition for a variable. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l00219">fxopt_utils.c:219</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0e908e635a621bf4d23147aa5e14deb5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="struct_s_i_f.html">SIF</a> pointer_math </td>
          <td>(</td>
          <td class="paramtype">gimple_stmt_iterator *&#160;</td>
          <td class="paramname"><em>gsi_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="struct_s_i_f.html">SIF</a>&#160;</td>
          <td class="paramname"><em>oprnd_frmt</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tree&#160;</td>
          <td class="paramname"><em>oprnd_tree</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process statements that include pointer arithmetic. </p>
<p>Includes POINTER_PLUS_EXPR, which adds an offset to a pointer, and MEM_REF, which uses a pointer to access a memory location. The RHS will include a pointer and (possibly) an offset that must be added to the pointer.</p>
<p>In GIMPLE the pointer offset is always some number of bytes, regardless of the actual size of the pointee's data type. If the pointer is to a real type then we may need to modify the offset's value for the new size of the replacement real-to-integer type.</p>
<p>The LHS may be a pointer (POINTER_PLUS_EXPR) or a normal variable (MEM_REF)</p>
<p>Examples of GIMPLE statements processed by this function: </p>
<div class="fragment"><div class="line">D.1985_27 = dctBlock_6(D) + D.1984_26;</div>
<div class="line">D.2065_132 = dctBlock_6(D) + 128;</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">gsi_p</td><td>statement iterator, points to statement being processed </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">oprnd_frmt</td><td>array of <a class="el" href="struct_s_i_f.html" title="The structure for the SIF definition of a variable. ">SIF</a> format structs for all operands </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">oprnd_tree</td><td>array of gcc trees for the operands </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="struct_s_i_f.html" title="The structure for the SIF definition of a variable. ">SIF</a> format struct for the result </dd></dl>

<p>Definition at line <a class="el" href="fxopt__stmts_8c_source.html#l00328">328</a> of file <a class="el" href="fxopt__stmts_8c_source.html">fxopt_stmts.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;{</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="struct_s_i_f.html#a23d0132158a81b4458e2a3f455796d19">shift</a> = 0;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_s_i_f.html">SIF</a> result_frmt;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <a class="code" href="fxopt__plugin_8h.html#a53dad240a1a2da4b6fbbb93f95fe190e">initialize_format</a>(&amp;result_frmt);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  gimple stmt = gsi_stmt(*gsi_p);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  oprnd_frmt[1] = <a class="code" href="fxopt__plugin_8h.html#a838f4d620efd0776323bbe5af19c60c2">get_operand_format</a>(stmt, 1, 0, <a class="code" href="fxopt__plugin_8h.html#a8b43bafee90b30676faae508c21cb8d7">PRINT</a>);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keywordflow">if</span> (! <a class="code" href="fxopt__plugin_8h.html#a9dbaabd34c9e88d0bc5550cdea19494c">format_initialized</a>(oprnd_frmt[1]))</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="keywordflow">return</span> result_frmt;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">if</span> (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a6930dd703e6e637a2cc7c98031994d28">ptr_op</a> == 0)</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <a class="code" href="fxopt__plugin_8h.html#aa61e4eca5d4c1dd8b1dbc7fdbb7ae657">fatal_error</a>(<span class="stringliteral">&quot;fxopt: pointer math, first operand not a pointer&quot;</span>);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  result_frmt = oprnd_frmt[0];</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  result_frmt.<a class="code" href="struct_s_i_f.html#acba84ce8e1e8ae332cd07112a63be032">aa</a> = NULL;        <span class="comment">// don&#39;t let copy_SIF trash op0 aa list</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <a class="code" href="fxopt__plugin_8h.html#a16e2f15bd22d9f8fa1435bb3111d5b1b">copy_SIF</a>(&amp;oprnd_frmt[1], &amp;result_frmt);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="comment">// Calculate how the offset must be adjusted to account for actual size</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="comment">// of fixed-point operand</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="keywordflow">if</span> (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a6930dd703e6e637a2cc7c98031994d28">ptr_op</a> &gt; oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">size</a>) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    shift =</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        exact_log2((HOST_WIDE_INT) (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a6930dd703e6e637a2cc7c98031994d28">ptr_op</a> / oprnd_frmt[1].size));</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a6930dd703e6e637a2cc7c98031994d28">ptr_op</a> &lt; oprnd_frmt[1].size) {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    shift = -exact_log2((HOST_WIDE_INT)</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                        (oprnd_frmt[1].size / oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a6930dd703e6e637a2cc7c98031994d28">ptr_op</a>));</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keywordflow">if</span> (gimple_assign_rhs_code(stmt) == POINTER_PLUS_EXPR) {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    oprnd_frmt[2] = <a class="code" href="fxopt__plugin_8h.html#a838f4d620efd0776323bbe5af19c60c2">get_operand_format</a>(stmt, 2, 0, <a class="code" href="fxopt__plugin_8h.html#a1934f7f19def21658d04f1cf4bb948b5">NOPRINT</a>);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    oprnd_frmt[2].<a class="code" href="struct_s_i_f.html#a23d0132158a81b4458e2a3f455796d19">shift</a> = <a class="code" href="struct_s_i_f.html#a23d0132158a81b4458e2a3f455796d19">shift</a>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    result_frmt.alias = oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#ac2025a3d51101618f408ac561260819d">id</a>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (gimple_assign_rhs_code(stmt) == MEM_REF) {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="comment">// If the RHS is a MEM_REF then there are really two operands on the RHS</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="comment">// although gimple_num_ops() says there is just one. Operand 1 has two</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="comment">// arguments: a pointer and an integer constant. The second argument of</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="comment">// operand 1 is used as a fake operand 2. Since it is known to be an</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="comment">// integer constant the associated SIF format not necessary.</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    double_int constant_double = mem_ref_offset(oprnd_tree[1]);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">if</span> (double_int_zero_p(constant_double))</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      shift = 0;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#a23d0132158a81b4458e2a3f455796d19">shift</a> = <a class="code" href="struct_s_i_f.html#a23d0132158a81b4458e2a3f455796d19">shift</a>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    result_frmt.ptr_op = 0;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <a class="code" href="fxopt__affine_8c.html#aaa3848f108434439b2d91a86bda052d3">delete_aa_list</a>(&amp;(result_frmt.aa));</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    result_frmt.aa = <a class="code" href="fxopt__affine_8c.html#adef7370a316f4892d31135bb831c4b41">affine_assign</a>(oprnd_frmt[1].<a class="code" href="struct_s_i_f.html#acba84ce8e1e8ae332cd07112a63be032">aa</a>, <a class="code" href="fxopt__plugin_8h.html#a97fe5470fb1ac167c713671655ff3e52">ADD</a>);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <a class="code" href="fxopt__plugin_8h.html#ace046b3f15f31d2cdb41c1126fd00517">error</a>(<span class="stringliteral">&quot;fxopt: pointer math, unexpected operation&quot;</span>);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keywordflow">if</span> (shift != 0)</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    fprintf(stderr, <span class="stringliteral">&quot;  Pointer stride will be shifted %d\n&quot;</span>, shift);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="keywordflow">return</span> result_frmt;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;}</div>
<div class="ttc" id="struct_s_i_f_html_a6930dd703e6e637a2cc7c98031994d28"><div class="ttname"><a href="struct_s_i_f.html#a6930dd703e6e637a2cc7c98031994d28">SIF::ptr_op</a></div><div class="ttdeci">int ptr_op</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00130">fxopt_plugin.h:130</a></div></div>
<div class="ttc" id="struct_s_i_f_html_acba84ce8e1e8ae332cd07112a63be032"><div class="ttname"><a href="struct_s_i_f.html#acba84ce8e1e8ae332cd07112a63be032">SIF::aa</a></div><div class="ttdeci">struct AA * aa</div><div class="ttdoc">Pointer to affine variable list. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00137">fxopt_plugin.h:137</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a8b43bafee90b30676faae508c21cb8d7"><div class="ttname"><a href="fxopt__plugin_8h.html#a8b43bafee90b30676faae508c21cb8d7">PRINT</a></div><div class="ttdeci">#define PRINT</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00036">fxopt_plugin.h:36</a></div></div>
<div class="ttc" id="struct_s_i_f_html_ac2025a3d51101618f408ac561260819d"><div class="ttname"><a href="struct_s_i_f.html#ac2025a3d51101618f408ac561260819d">SIF::id</a></div><div class="ttdeci">int id</div><div class="ttdoc">Hash key. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00116">fxopt_plugin.h:116</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a97fe5470fb1ac167c713671655ff3e52"><div class="ttname"><a href="fxopt__plugin_8h.html#a97fe5470fb1ac167c713671655ff3e52">ADD</a></div><div class="ttdeci">#define ADD</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00039">fxopt_plugin.h:39</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a838f4d620efd0776323bbe5af19c60c2"><div class="ttname"><a href="fxopt__plugin_8h.html#a838f4d620efd0776323bbe5af19c60c2">get_operand_format</a></div><div class="ttdeci">struct SIF get_operand_format(gimple stmt, int op_number, int element_number, bool print)</div><div class="ttdoc">Determine the SIF format of a statement operand. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l01152">fxopt_utils.c:1152</a></div></div>
<div class="ttc" id="fxopt__affine_8c_html_aaa3848f108434439b2d91a86bda052d3"><div class="ttname"><a href="fxopt__affine_8c.html#aaa3848f108434439b2d91a86bda052d3">delete_aa_list</a></div><div class="ttdeci">void delete_aa_list(struct AA **aa_list_pp)</div><div class="ttdoc">Delete an entire AA definition. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__affine_8c_source.html#l00251">fxopt_affine.c:251</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a16e2f15bd22d9f8fa1435bb3111d5b1b"><div class="ttname"><a href="fxopt__plugin_8h.html#a16e2f15bd22d9f8fa1435bb3111d5b1b">copy_SIF</a></div><div class="ttdeci">void copy_SIF(struct SIF *src, struct SIF *dest)</div><div class="ttdoc">Copy the SIF format of one variable to another. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l00279">fxopt_utils.c:279</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a9dbaabd34c9e88d0bc5550cdea19494c"><div class="ttname"><a href="fxopt__plugin_8h.html#a9dbaabd34c9e88d0bc5550cdea19494c">format_initialized</a></div><div class="ttdeci">int format_initialized(struct SIF oprnd_frmt)</div><div class="ttdoc">Predicate for an initialized format specification. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l01738">fxopt_utils.c:1738</a></div></div>
<div class="ttc" id="struct_s_i_f_html_a464166f19006c30663e2465d606c8a07"><div class="ttname"><a href="struct_s_i_f.html#a464166f19006c30663e2465d606c8a07">SIF::size</a></div><div class="ttdeci">int size</div><div class="ttdoc">size of this variable, in bits </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00127">fxopt_plugin.h:127</a></div></div>
<div class="ttc" id="fxopt__affine_8c_html_adef7370a316f4892d31135bb831c4b41"><div class="ttname"><a href="fxopt__affine_8c.html#adef7370a316f4892d31135bb831c4b41">affine_assign</a></div><div class="ttdeci">struct AA * affine_assign(struct AA *aa_src_list_p, bool add)</div><div class="ttdoc">Determine affine result of a simple assignment statement. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__affine_8c_source.html#l00335">fxopt_affine.c:335</a></div></div>
<div class="ttc" id="struct_s_i_f_html"><div class="ttname"><a href="struct_s_i_f.html">SIF</a></div><div class="ttdoc">The structure for the SIF definition of a variable. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00115">fxopt_plugin.h:115</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_aa61e4eca5d4c1dd8b1dbc7fdbb7ae657"><div class="ttname"><a href="fxopt__plugin_8h.html#aa61e4eca5d4c1dd8b1dbc7fdbb7ae657">fatal_error</a></div><div class="ttdeci">void fatal_error(const char *,...)</div></div>
<div class="ttc" id="struct_s_i_f_html_a23d0132158a81b4458e2a3f455796d19"><div class="ttname"><a href="struct_s_i_f.html#a23d0132158a81b4458e2a3f455796d19">SIF::shift</a></div><div class="ttdeci">int shift</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00128">fxopt_plugin.h:128</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_ace046b3f15f31d2cdb41c1126fd00517"><div class="ttname"><a href="fxopt__plugin_8h.html#ace046b3f15f31d2cdb41c1126fd00517">error</a></div><div class="ttdeci">void error(const char *,...)</div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a53dad240a1a2da4b6fbbb93f95fe190e"><div class="ttname"><a href="fxopt__plugin_8h.html#a53dad240a1a2da4b6fbbb93f95fe190e">initialize_format</a></div><div class="ttdeci">void initialize_format(struct SIF *op_fmt)</div><div class="ttdoc">Initialize the SIF definition for a variable. </div><div class="ttdef"><b>Definition:</b> <a href="fxopt__utils_8c_source.html#l00219">fxopt_utils.c:219</a></div></div>
<div class="ttc" id="fxopt__plugin_8h_html_a1934f7f19def21658d04f1cf4bb948b5"><div class="ttname"><a href="fxopt__plugin_8h.html#a1934f7f19def21658d04f1cf4bb948b5">NOPRINT</a></div><div class="ttdeci">#define NOPRINT</div><div class="ttdef"><b>Definition:</b> <a href="fxopt__plugin_8h_source.html#l00037">fxopt_plugin.h:37</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="fxopt__stmts_8c.html">fxopt_stmts.c</a></li>
    <li class="footer">Generated on Wed Jan 8 2014 12:19:55 for fxopt by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
