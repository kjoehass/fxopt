<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>fxopt: DCT Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">fxopt
   </div>
   <div id="projectbrief">A floating-point to fixed-point arithmetic conversion plugin for gcc</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dctexmpl.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">DCT Example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro"></a>
Introduction</h1>
<p>The discrete cosine transform (DCT) is used as an example to illustrate how fxopt is used in practice. The DCT is a common signal-processing algorithm used during lossy compression of audio and image data, and is often computed in cost-sensitive embedded systems. The particular version of the DCT considered here is a 2-dimensional 8-by-8 implementation that was published in Dr. Dobb's Journal on March 1, 1999, in "Algorithm Alley" by Tim Kientzle.</p>
<h1><a class="anchor" id="evaluations"></a>
Evaluations</h1>
<p>The floating-point DCT function was converted to fixed-point using <em>fxopt</em> with affine range estimation. In addition, some optional methods that improve accuracy were evaluated. There are no division operations in this algorithm so the <em>fxopt</em> option that converted constant division to multiplication was not used. The table below lists the optimization options that were used, along with the single-letter abbreviation that will be used to indicate when the option was used. These abbreviations are used in the table of results and also in the filenames of the source files and transcripts generated by <em>fxopt</em>.</p>
<table class="doxtable">
<tr>
<th align="left">Abbreviation </th><th align="left">Optimization technique  </th></tr>
<tr>
<td align="left">r </td><td align="left">Rounding with run-time check for negative values </td></tr>
<tr>
<td align="left">p </td><td align="left">Rounding without run-time check </td></tr>
<tr>
<td align="left">d </td><td align="left">Double-precision multiplication </td></tr>
</table>
<p>The two rounding options are mutually exclusive, but either can be used with or without double-precision multiplications. A total of six variations of fxopt optimization were created.</p>
<p>We also evaluated five versions of the algorithm that used a conventional fixed-point implementation, where all variables have the same fixed-point format. The number of bits to the right of the binary point (the fraction bits) varied from 8 to 24. No rounding was used.</p>
<p>In addition to characterizing the accuracy of the fixed-point computations we also measure the assembly code size and execution time for a representative target processor. In this case, the assembly code produced by gcc was executed on an ARM Cortex-M3 microcontroller and the execution time of the calculation was measured using a hardware timer on the microcontroller, with a resolution of one clock cycle.</p>
<p>Provided in the table below are the maximum execution times for all of the fixed-point implementations, as well as that of single-precision and double-precision floating-point versions that were compiled with a soft floating-point library maintained by ARM.</p>
<table class="doxtable">
<tr>
<th align="left">Version </th><th align="right">Run Time (cycles) </th><th align="right">Size (bytes) </th><th align="right">SQNR (dB)  </th></tr>
<tr>
<td align="left">fxopt </td><td align="right">2685 </td><td align="right">900 </td><td align="right">31.7 </td></tr>
<tr>
<td align="left">fxopt +p </td><td align="right">2966 </td><td align="right">984 </td><td align="right">33.0 </td></tr>
<tr>
<td align="left">fxopt +r </td><td align="right">3419 </td><td align="right">1134 </td><td align="right">65.9 </td></tr>
<tr>
<td align="left">fxopt +d </td><td align="right">4741 </td><td align="right">1356 </td><td align="right">72.5 </td></tr>
<tr>
<td align="left">fxopt +p +d </td><td align="right">5531 </td><td align="right">1536 </td><td align="right">75.7 </td></tr>
<tr>
<td align="left">fxopt +r +d </td><td align="right">10439 </td><td align="right">2580 </td><td align="right">151.5 </td></tr>
<tr>
<td align="left">Q8 </td><td align="right">2529 </td><td align="right">790 </td><td align="right">22.3 </td></tr>
<tr>
<td align="left">Q12 </td><td align="right">2659 </td><td align="right">908 </td><td align="right">34.4 </td></tr>
<tr>
<td align="left">Q16 </td><td align="right">4379 </td><td align="right">1204 </td><td align="right">47.6 </td></tr>
<tr>
<td align="left">Q20 </td><td align="right">4604 </td><td align="right">1310 </td><td align="right">59.7 </td></tr>
<tr>
<td align="left">Q24 </td><td align="right">4411 </td><td align="right">1320 </td><td align="right">71.1 </td></tr>
<tr>
<td align="left">Single-precision float </td><td align="right">51848 </td><td align="right">8366 </td><td align="right">70.2 </td></tr>
<tr>
<td align="left">Double-precision float </td><td align="right">86324 </td><td align="right">13182 </td><td align="right">N/A </td></tr>
</table>
<p>Note that the output of the double-precision implementation was assumed to be exact and was used to calculate the signal-to-quantized-noise ratio (SQNR) for all other versions. The code size for the software floating-point implementations includes the size of the floating-point library functions that were called by the DCT function.</p>
<h1><a class="anchor" id="results"></a>
Results</h1>
<p>The fixed-point code produced by <em>fxopt</em> performed the DCT with greater accuracy than the conventional fixed-point code with comparable values of execution time and code size. When full rounding and double-precision multiplications are used, the <em>fxopt</em> output code provides significantly greater accuracy than single-precision floating-point version while executing about five times faster than a software floating-point library. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Apr 22 2014 19:02:38 for fxopt by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
